angular.module('populationioApp',['duScroll','ngResource','ngAnimate','ui.bootstrap','pascalprecht.translate','tmh.dynamicLocale','angularMoment']).config(["$locationProvider","$httpProvider","$translateProvider","tmhDynamicLocaleProvider",function($locationProvider,$httpProvider,$translateProvider,tmhDynamicLocaleProvider){if(bowser.mobile){window.location.href='http://m.population.io';}
$httpProvider.defaults.useXDomain=true;$httpProvider.defaults.cache=true;delete $httpProvider.defaults.headers.common['X-Requested-With'];$translateProvider.useSanitizeValueStrategy(null);$translateProvider.useStaticFilesLoader({prefix:'i18n/',suffix:'.json'});tmhDynamicLocaleProvider.localeLocationPattern('i18n/angular/angular-locale_{{locale}}.js');}]).run(["$rootScope","LanguageService",function($rootScope,LanguageService){var userLanguage=window.navigator.userLanguage||window.navigator.language;userLanguage=userLanguage.slice(0,2);LanguageService.skipLanguageEvent(userLanguage);LanguageService.change(userLanguage);$rootScope.currentPage=0;}]);(function(){'use strict';angular.module('populationioApp').directive('share',['$location',function($location){return{link:function($scope,elem,attrs){$scope.$watch(function(){return $location.absUrl();},function(url){_update(encodeURIComponent(url));});var _update=function(url){var link='#';switch(attrs.share){case 'twitter':link='http://twitter.com/intent/tweet?text='+attrs.shareTitle+'%20'+url;break;case 'facebook':link='http://facebook.com/sharer.php?u='+url;break;case 'linkedin':link='http://www.linkedin.com/shareArticle?mini=true&url='+url+'&title='+attrs.shareTitle;break;case 'qzone':link='http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url='+url+'&title='+attrs.shareTitle;break;case 'tencentWeibo':link='http://v.t.qq.com/share/share.php?url='+url+'&title='+attrs.shareTitle;break;case 'sinaWeibo':link='http://service.weibo.com/share/share.php?url='+url+'&title='+attrs.shareTitle;break;}
attrs.$set('href',link);};}};}]).directive('stoptab',['$location',function(){return function(scope,element){element.bind('keydown keypress',function(event){if(event.which===9){element.blur();event.preventDefault();}});};}]).directive('compileUnsafe',["$compile",function($compile){return function(scope,element,attr){scope.$watch(attr.compileUnsafe,function(val,oldVal){if(!val||(val===oldVal&&element[0].innerHTML)){return;}
element.html(val);$compile(element)(scope);});};}]);}());(function(){'use strict';angular.module('populationioApp').filter('ordinal',function(){return function(input){var s=['th','st','nd','rd'],v=input%100;return input+(s[(v-20)%10]||s[v]||s[0]);};});}());d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this);});};d3.selection.prototype.moveToBack=function(){return this.each(function(){var firstChild=this.parentNode.firstChild;if(firstChild){this.parentNode.insertBefore(this,firstChild);}});};String.prototype.capitalize=function(){return this.replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase();});};(function(){'use strict';angular.module('populationioApp').directive('birthdaysChart',['$filter','ProfileService',function($filter,ProfileService){return{restrict:'E',scope:{continentsData:'=',worldData:'=',country:'='},link:function($scope,element){var parentWidth=1200,parentHeight=700;$scope.$on('continentsDataLoaded',function(){_buildContinentsChart($scope.continentsData);});$scope.$on('worldDataLoaded',function(){_buildWorldChart($scope.worldData);});var chart=d3.select(element[0]).append('svg').attr('width',parentWidth).attr('height',parentHeight);var worldChart=chart.append('g').attr({'class':'world-chart',transform:'translate('+[parentWidth-parentWidth/4,350]+') rotate(0)'});var continentsChart=chart.append('g').attr('class','continents-chart');var label1;var label2;$scope.$on('languageChange',function(){if(label1){label1.text($filter('translate')('BIRTHDAY_SHARED'));}
if(label2){label2.text($filter('translate')('BIRTHDAY_SHARED'));}});function _buildContinentsChart(continentsData){var radius=d3.scale.sqrt().domain([d3.min(continentsData,function(d){return d.value;}),d3.max(continentsData,function(d){return d.value;})]).range([15,60]);var labelSize=d3.scale.linear().domain([d3.min(continentsData,function(d){return d.value;}),d3.max(continentsData,function(d){return d.value;})]).range([8,20]);var nodes=continentsData.map(function(d){return{value:d.value,radius:radius(d.value),countryAbbr:d.countryAbbr,countryTitle:d.countryTitle};}),color=d3.scale.category10();var force=d3.layout.force().gravity(0.2).charge(function(d,i){return i?0:-2000;}).nodes(nodes).size([parentWidth/2,parentHeight-100]);force.start();continentsChart.selectAll('g').remove();var tooltipElement=continentsChart.append('g').attr({'class':'tooltip',opacity:0});tooltipElement.append('line').attr({'class':'tooltip-line',x1:0,x2:0,y1:0,y2:0});tooltipElement.append('text').attr({'class':'value-label',x:0,y:21}).text('');label1=tooltipElement.append('text').attr({'class':'shared-label',x:0,y:40}).text($filter('translate')('BIRTHDAY_SHARED'));tooltipElement.append('text').attr({'class':'country-label',x:0,y:55}).text('');var countryTooltip=continentsChart.append('g').attr({class:'country-tooltip'}).style({opacity:0});countryTooltip.append('circle').attr({r:60,class:'visual'}).style({fill:'#bdaee9'});var control=countryTooltip.append('g').attr({class:'control'});control.append('circle').attr({r:0}).style({fill:'transparent'});control.append('text').style({'text-anchor':'middle',fill:'white'}).attr({y:5}).text('');var _highlightCountry=function(){var nameWidth=0;var datum=d3.select(this).datum();var itemRadius=parseInt(d3.select(this).select('circle').attr('r'),0);var yShift=0;var lineShift=0;if(datum.y<parentHeight/2){yShift=0}
if(datum.y>parentHeight/2){yShift=-70}
tooltipElement.select('.value-label').text(function(){return 'ca. '+$filter('number')(datum.value,0);});tooltipElement.select('.country-label').text(function(){return 'in '+datum.countryTitle;});var x=d3.select(this)[0][0].getCTM().e;var y=d3.select(this)[0][0].getCTM().f;countryTooltip.attr({transform:'translate('+[x,y]+')'}).transition().style({opacity:1});countryTooltip.select('text').text(datum.countryTitle);countryTooltip.select('.visual').transition().attr({r:function(){nameWidth=countryTooltip.select('text').node().getComputedTextLength();return itemRadius<nameWidth/2?nameWidth/2+40:itemRadius+40;}});tooltipElement.transition().attr({transform:'translate('+[0,datum.y]+')',opacity:1}).select('.tooltip-line').attr({x2:datum.x-nameWidth/2-20,y1:lineShift,y2:lineShift});tooltipElement.selectAll('text').transition().attr({dy:yShift})
countryTooltip.select('.control circle').attr({r:itemRadius});};var countryElement=continentsChart.selectAll('.country-element').data(nodes).enter().append('g').attr('class','country-element').on('mouseenter',_highlightCountry);countryElement.append('circle').attr({r:function(d){return d.radius-5;}}).style({fill:function(d){if(d.countryTitle===$scope.country){return '#613FC2';}
return 'rgba(0,0,0,0.05)';},stroke:function(){return 'rgba(0,0,0,0.3)';},'stroke-width':0.3});countryTooltip.moveToFront();tooltipElement.moveToFront();countryElement.append('text').text(function(d){if(d.radius<50){return d.countryAbbr;}
else{return d.countryTitle;}}).attr({'class':function(d){if(d.countryTitle===$scope.country){return 'country-title current-country';}
return 'country-title';},y:function(d,i){return labelSize(d.value)/2;}}).style('font-size',function(d,i){return labelSize(d.value);});force.on('tick',function(){var q=d3.geom.quadtree(nodes),i=0,n=nodes.length;while(++i<n){q.visit(collide(nodes[i]));}
countryElement.attr('transform',function(d,i){return 'translate('+[d.x,d.y]+')';});});countryTooltip.select('.control').on('mouseleave',function(e){tooltipElement.transition().attr('opacity',0);countryTooltip.transition().style({opacity:0})
countryTooltip.select('.control circle').attr({r:0});countryTooltip.select('.visual').transition().attr({r:0});});function collide(node){var r=node.radius+16,nx1=node.x-r,nx2=node.x+r,ny1=node.y-r,ny2=node.y+r;return function(quad,x1,y1,x2,y2){if(quad.point&&(quad.point!==node)){var x=node.x-quad.point.x,y=node.y-quad.point.y,l=Math.sqrt(x*x+y*y),r=node.radius+quad.point.radius;if(l<r){l=(l-r)/l*0.5;node.x-=x*=l;node.y-=y*=l;quad.point.x+=x;quad.point.y+=y;}}
return x1>nx2||x2<nx1||y1>ny2||y2<ny1;};}}
function _buildWorldChart(worldData){worldData=worldData.sort(function(a,b){return a.value>b.value?-1:1;});var arc0=d3.svg.arc().outerRadius(120).innerRadius(120);var arc=d3.svg.arc().outerRadius(210).innerRadius(120);var labelArc=d3.svg.arc().outerRadius(200).innerRadius(90);var arcBorder0=d3.svg.arc().outerRadius(120).innerRadius(120);var arcBorder=d3.svg.arc().outerRadius(130).innerRadius(120);var pie=d3.layout.pie().sort(null).value(function(d){return d.value;});worldChart.selectAll('g').remove();var human=worldChart.append('g').attr({'class':'human','transform':'translate('+[-50,-115]+')'}).attr('opacity',0);human.append('use').attr({'class':'ticks','xlink:href':function(){if(ProfileService.gender==='female'){return '#female-large';}else{return '#male-large';}}});human.transition().delay(3000).duration(1000).attr('opacity',1);var _highlightCountry=function(){worldChart.transition().duration(2000).attr('transform','translate('+[parentWidth-parentWidth/4,350]+') rotate('+[-2,2][Math.floor(Math.random()*2)]+')');var _arc=d3.select(this);_arc.select('line').transition().attr({x2:function(d){return labelArc.centroid(d)[0]>=0?145:-145;}});_arc.select('.world-chart-label-total').transition().delay(200).attr('opacity',1);_arc.select('.world-chart-shared-birthdays-label').transition().delay(250).attr('opacity',1);_arc.select('.world-chart-label-percentage').transition().delay(300).attr('opacity',1);_arc.select('path.main').transition().style('fill','#BDAEE9');_arc.select('path.border').transition().attr('opacity',0);};var pieChart=worldChart.selectAll('.arc').data(pie(worldData)).enter().append('g').attr('class','arc').on('click',_highlightCountry).on('mouseenter',_highlightCountry).on('mouseleave',function(){worldChart.transition().attr('transform','translate('+[parentWidth-parentWidth/4,350]+') rotate(0)');var _arc=d3.select(this);_arc.select('line').transition().attr({x2:0});_arc.select('.world-chart-label-total').transition().delay(300).attr('opacity',0);_arc.select('.world-chart-shared-birthdays-label').transition().delay(250).attr('opacity',0);_arc.select('.world-chart-label-percentage').transition().delay(200).attr('opacity',0);_arc.select('path.main').transition().style('fill','#eee');d3.selectAll('.border').transition().attr('opacity',1)});var color=d3.scale.linear().domain([0,worldData.length]).range(['#555','#fff']);pieChart.append('path').attr('d',arc0).attr('class','main').style('fill','#eee').attr('opacity',0).transition().delay(function(d,i){return i*100;}).duration(400).attr('d',arc).attr('opacity',1);pieChart.append('path').attr('d',arcBorder0).attr('class','border').style('fill',function(d,i){return color(i);}).attr('opacity',0).transition().delay(function(d,i){return 1000+i*100;}).duration(400).attr('d',arcBorder).attr('opacity',1);var labelArea=pieChart.append('g').attr('class','label-area').attr('opacity',0).attr('transform',function(d){d.outerRadius=100;d.innerRadius=10;return 'translate('+labelArc.centroid(d)+') rotate('+angle(d)+')';});labelArea.append('text').attr('class','world-chart-label').attr('dy','.35em').text(function(d){var countryFittableTitle=d.data.countryTitle;if(d.data.countryTitle==='Russian Federation'){countryFittableTitle='Russia'}
return countryFittableTitle;}).style('text-anchor',function(d){return labelArc.centroid(d)[0]>=0?'begin':'end';});labelArea.append('text').attr('class','world-chart-label-total').attr('opacity',0).attr('dy','17px').attr('dx',function(d){return labelArc.centroid(d)[0]>=0?145:-145;}).text(function(d){return $filter('number')(d.data.value,0);}).style('text-anchor',function(d){return labelArc.centroid(d)[0]>=0?'end':'begin';}).style('font-size',22);label2=labelArea.append('text').attr('class','world-chart-shared-birthdays-label').attr('opacity',0).attr('dy','27px').attr('font-size','9px').attr('dx',function(d){return labelArc.centroid(d)[0]>=0?145:-145;}).text('shared birthdays').style('text-anchor',function(d){return labelArc.centroid(d)[0]>=0?'end':'begin';});labelArea.append('line').attr('class','world-chart-label-line').attr({x1:function(d){return labelArc.centroid(d)[0]>=0?0:0;},y1:-10,x2:0,y2:-10});labelArea.transition().delay(function(d,i){return 2000+i*100;}).attr('opacity',1);}
function angle(d){var a=(d.startAngle+d.endAngle)*90/Math.PI-90;return a>90?a-180:a;}}};}]);}());angular.module('populationioApp').directive('countryTranslate',['$translate',function($translate){return{restrict:'A',require:'ngModel',link:function(scope,element,attrs,ctrl){'use strict';ctrl.$formatters.unshift(function(value){return $translate.instant(value);});}};}]);angular.module('populationioApp').directive('deathChart',['$filter','$translate','PopulationIOService','HelloWords','$timeout','ProfileService',function($filter,$translate,PopulationIOService,HelloWords,$timeout,ProfileService){return{restrict:'E',link:function($scope,element){var chart,xAxis,yAxis,parentWidth=element[0].clientWidth,pointerPerson,pointerWorld,pointerCountry,actionBox,personAreaWorld,personAreaCountry,parentHeight=240,yAxisFormat=d3.format('.0%'),xRange=d3.scale.linear(),yRange=d3.scale.linear().nice(),line=d3.svg.line(),area=d3.svg.area(),worldSpline,countrySpline,age,areaCountry,areaWorld,areaLine,xAxisElement,yAxisElement,xLabel,yLabel,someLabel,worldLabel,worldLabel2,xLabelLine,yLabelLine,tooltip=d3.select('.chart-tooltip'),fullData;_initChart();$scope.$on('languageChange',function(){xLabel.text($translate.instant('DEATH_CHART_AXIS_X'));yLabel.text($translate.instant('DEATH_CHANCES_OF_DYING'));yLabel.text(function(){if($scope.type==='distribution'){var currentLang=$translate.proposedLanguage()||$translate.use();if(currentLang=='DE')
return $translate.instant('DEATH_MORTALITY_DISTRIBUTION');return $translate.instant('DEATH_CHANCES_OF_DYING');}
else{return $translate.instant('DEATH_CHART_AXIS_Y');}});someLabel.text($translate.instant('DEATH_CHART_YOUR_AGE'));pointerPerson.select('.age').text(age+' '+$translate.instant('UNIT_YEARS'));pointerWorld.select('.region').text($translate.instant('SUMMARY_WORLD'));pointerWorld.select('.age').text(function(){return $filter('number')($scope.totalLifeWorldInYears,1)+' '+$translate.instant('UNIT_YEARS');});pointerCountry.select('.region').text($translate.instant(ProfileService.country));pointerCountry.select('.age').text(function(){return $filter('number')($scope.totalLifeCountryInYears,1)+' '+$translate.instant('UNIT_YEARS');});});$scope.$on('mortalityDistributionDataChanged',function(e,data){fullData=data;$timeout(function(){age=ProfileService.getAge();_updateChart({world:data.worldDistribution,country:data.countryDistribution});},0);});$scope.$watch('type',function(newVal){if(newVal==='distribution'&&fullData){_updateChart({world:fullData.worldDistribution,country:fullData.countryDistribution});}
else if(newVal==='chances'){_updateChart({world:fullData.worldChances,country:fullData.countryChances});}});function _initChart(){chart=d3.select(element[0]).append('svg').attr({width:parentWidth,height:parentHeight+200}).append('g').attr({'class':'death-chart',transform:'translate(0,180)'});xAxis=d3.svg.axis().scale(xRange);yAxis=d3.svg.axis().scale(yRange).tickSize(5).orient('left');areaCountry=chart.append('path');areaWorld=chart.append('path');areaLine=chart.append('path');chart.select('.x-label').remove();chart.select('.y-label').remove();chart.select('.label-line').remove();chart.select('.vertical-pointer').remove();xLabel=chart.append('text').text($translate.instant('DEATH_CHART_AXIS_X')).attr({'class':'x-label',transform:'translate('+[parentWidth-100,parentHeight-50+16]+')'}).style({'text-anchor':'end'});xLabelLine=chart.append('line').attr({'class':'label-line',x1:parentWidth-200,y1:parentHeight-50,x2:parentWidth-70,y2:parentHeight-50}).style({stroke:'#d9d9d9','stroke-width':1});yLabel=chart.append('text').text($translate.instant('DEATH_CHANCES_OF_DYING')).attr({'class':'y-label',transform:'translate('+[110,-20]+') rotate(-90)'}).style({'text-anchor':'start'});yLabelLine=chart.append('line').attr({'class':'label-line',x1:120,y1:-130,x2:120,y2:0}).style({stroke:'#d9d9d9','stroke-width':1});xAxisElement=chart.append('g');yAxisElement=chart.append('g');pointerPerson=chart.append('g').attr({'class':'pointer',transform:'translate(-200,0)'});pointerPerson.append('line').attr({x1:0,y1:-30,x2:0,y2:30}).style({stroke:'#dedede','stroke-width':'1px'});pointerPerson.append('circle').attr({r:3,cy:-30}).style({fill:'#333'});someLabel=pointerPerson.append('text').style({fill:'#333','text-anchor':'start'}).attr({'class':'region',dx:10,dy:10}).text($translate.instant('DEATH_CHART_YOUR_AGE'));pointerPerson.append('text').style({'font-size':'9pt',fill:'#666','text-anchor':'start'}).attr({'class':'age',dx:10,dy:25});pointerWorld=chart.append('g').attr({'class':'pointer',transform:'translate(-200,0)'});pointerWorld.append('line').attr({x1:0,y1:0,x2:0,y2:parentHeight+50,'stroke-dasharray':'2,2'}).style({stroke:'#888','stroke-width':'1px'});worldLabel=pointerWorld.append('text').style({fill:'#613FC2','text-anchor':'start'}).attr({'class':'region',dx:10,dy:10}).text($translate.instant('SUMMARY_WORLD'));worldLabel2=pointerWorld.append('text').style({'font-size':'9pt',fill:'#666','text-anchor':'start'}).attr({'class':'age',dx:10,dy:25}).text($translate.instant('SUMMARY_WORLD'));pointerCountry=chart.append('g').attr({'class':'pointer',transform:'translate(-200,0)'});pointerCountry.append('line').attr({x1:0,y1:0,x2:0,y2:parentHeight+10,'stroke-dasharray':'2,2'}).style({stroke:'#888','stroke-width':'1px'});pointerCountry.append('text').style({fill:'#BDAEE9','text-anchor':'start'}).attr({'class':'region',dx:10,dy:10});pointerCountry.append('text').style({'font-size':'9pt',fill:'#666','text-anchor':'start'}).attr({'class':'age',dx:10,dy:25});actionBox=chart.append('rect').style({fill:'red',opacity:0}).attr({transform:'translate(120,-150)',width:parentWidth-280,height:340});actionBox.on('mouseenter',_showTooltip).on('mousemove',function(){var mouse=d3.mouse(this);var position=xRange.invert(mouse[0]+120);var ageFormatted=$filter('number')(position,2);var findValue=function(spline,x){for(var t=0;t<=1;t+=0.001){var current=spline.calcAt(t);if(current[0]>=x){return current[1];}}};var deathRateWorld=$filter('number')(findValue(worldSpline,position),2);var deathRateCountry=$filter('number')(findValue(countrySpline,position),2);tooltip.html(function(){return '<p><span class="tooltip-label">'+$translate.instant('DEATH_CHART_AXIS_X')+':</span>'+
'<span class="tooltip-value">'+ageFormatted+' '+$translate.instant('UNIT_YEARS')+'</span></p>'+
'<p><span class="tooltip-label">'+$translate.instant('LOCAL_WORLD')+':</span>'+
'<span class="tooltip-value">'+deathRateWorld+'%</span></p>'+
'<p><span class="tooltip-label">'+$translate.instant(ProfileService.country)+':</span>'+
'<span class="tooltip-value">'+deathRateCountry+'%</span></p>';});tooltip.style('left',(d3.event.pageX-100)+'px').style('top',(d3.event.pageY-d3.mouse(this)[1])+'px');}).on('mouseleave',_hideTooltip);function _showTooltip(){tooltip.attr({'class':'chart-tooltip death'}).transition().duration(200).style({display:'block',opacity:0.9});}
function _hideTooltip(){tooltip.transition().duration(200).style('opacity',0).each('end',function(){d3.select(this).style({display:'none'}).attr({'class':'chart-tooltip'});});}}
function _updateChart(data){personAreaCountry=_.filter(data.country,function(item){return item.age>=age-5;});personAreaWorld=_.filter(data.world,function(item){return item.age>=age-5;});var worldMax=d3.max(personAreaWorld,function(d){return d.mortality_percent;});var countryMax=d3.max(personAreaCountry,function(d){return d.mortality_percent;});var yTickStep=d3.max([worldMax,countryMax])/3;xAxis.tickFormat(function(d){return d+'y';});yAxis.tickFormat(function(d){return yAxisFormat(d/100);}).tickValues([0,yTickStep,yTickStep*2,d3.max([worldMax,countryMax])]);xRange.range([120,parentWidth-160]).domain([d3.min(personAreaCountry,function(d){return d.age;}),d3.max(personAreaCountry,function(d){return d.age;})]).nice([0,25,50,55,60,75,100,125]);yRange.range([parentHeight-50,0]).domain([0,d3.max([worldMax,countryMax])]);line.x(function(d){return xRange(d.age);}).y(function(d){return yRange(d.mortality_percent);}).interpolate('basis');area.x(function(d){return xRange(d.age);}).y0(parentHeight-50).y1(function(d){return yRange(d.mortality_percent);}).interpolate('basis');countrySpline=new BSpline(personAreaCountry.map(function(item){return[item.age,item.mortality_percent];}),3);worldSpline=new BSpline(personAreaWorld.map(function(item){return[item.age,item.mortality_percent];}),3);areaCountry.attr('fill',function(){if($scope.type==='distribution'){return '#BDAEE9';}
else{return 'transparent';}}).attr('stroke',function(){if($scope.type==='distribution'){return 'transparent';}
else{return '#BDAEE9';}}).attr('stroke-width',function(){if($scope.type==='distribution'){return 0;}
else{return 5;}}).transition().attr('d',function(){if($scope.type==='distribution'){return area(personAreaCountry);}
else{return line(personAreaCountry);}});areaWorld.attr('fill',function(){if($scope.type==='distribution'){return '#613FC2';}
else{return 'transparent';}}).attr('stroke',function(){if($scope.type==='distribution'){return 'transparent';}
else{return '#613FC2';}}).attr('stroke-width',function(){if($scope.type==='distribution'){return 0;}
else{return 5;}}).transition().attr('d',function(){if($scope.type==='distribution'){return area(personAreaWorld);}
else{return line(personAreaWorld);}}).style({opacity:1});areaLine.transition().attr('d',line(data)).attr('fill','none');xAxisElement.transition().attr('class','x axis').attr('transform','translate(0,'+(parentHeight-50)+')').call(xAxis);yAxisElement.transition().attr('class','y axis').attr('transform','translate(120,0)').call(yAxis);pointerWorld.transition().attr({transform:'translate('+[xRange($scope.totalLifeWorldInYears),-100]+')'});pointerWorld.select('.age').transition().text(function(){return $filter('number')($scope.totalLifeWorldInYears,1)+' '+$translate.instant('UNIT_YEARS');});pointerCountry.transition().attr({transform:'translate('+[xRange($scope.totalLifeCountryInYears),-60]+')'});pointerCountry.select('.region').text($translate.instant(ProfileService.country));pointerCountry.select('.age').transition().text(function(){return $filter('number')($scope.totalLifeCountryInYears,1)+' '+$translate.instant('UNIT_YEARS');});pointerPerson.select('.age').text(age+' '+$translate.instant('UNIT_YEARS'));pointerPerson.transition().attr({transform:'translate('+[xRange(age),parentHeight-20]+')'});yLabel.text(function(){if($scope.type==='distribution'){var currentLang=$translate.proposedLanguage()||$translate.use();if(currentLang=='DE')
return $translate.instant('DEATH_MORTALITY_DISTRIBUTION');return $translate.instant('DEATH_CHANCES_OF_DYING');}
else{return $translate.instant('DEATH_CHART_AXIS_Y');}});yLabelLine.transition().attr({y1:function(){if($scope.type==='distribution'){return-130;}else{return-180;}}});}}};}]);angular.module('populationioApp').directive('expectancyMap',function(){return{restrict:'E',scope:{country:'=',reference:'=',width:'@',height:'@'},controller:'ExpectancyMapComponentCtrl'};});angular.module('populationioApp').controller('ExpectancyMapComponentCtrl',['$scope','$element','$translate','Countries','ProfileService','PopulationIOService',function($scope,$element,$translate,Countries,ProfileService,PopulationIOService){'use strict';var width=$scope.width||1200;var height=$scope.height||500;$scope.$root.$on('timesliderChanged',function(e,year){_loadLifeExpectancy('ref',new Date(year,0,1,0,0,0),$scope.country);_loadLifeExpectancy('rel',new Date(year,0,1,0,0,0),$scope.reference);});$scope.$watch('country',function(country){if(country){_loadLifeExpectancy('ref',new Date(),country);}else{d3.selectAll('.desc-ref').remove();d3.select('.country-ref').classed('country-active',false);}});$scope.$watch('reference',function(country){if(country){_loadLifeExpectancy('rel',new Date(),country);}else{d3.selectAll('.desc-rel').remove();d3.select('.country-rel').classed('country-active',false);}});var root=d3.select($element[0]).append('svg').attr({'width':width,'height':height});root.append('g').attr({'class':'countries'});var projection=d3.geo.robinson().scale(181).translate([width/2,height/1.80]);var path=d3.geo.path().projection(projection);var getCountryTitle=function(country){var result=Countries.filter(function(item){return item.GMI_CNTRY===country;});if(result.length>0){return $translate.instant(result[0].POPIO_NAME);}
return country;};var estimationText;$scope.$on('languageChange',function(){root.select('.countries').selectAll('.country').attr({'title':function(d){return getCountryTitle(d.properties.GMI_CNTRY);}});});d3.json('/data/countries_topo.json',function(error,data){if(error){return console.error(error);}
var countries=topojson.feature(data,data.objects.populationio_countries).features;root.select('.countries').selectAll('.country').data(countries).enter().insert('path').attr({'class':'country','d':path,'data-id':function(d){return d.properties.GMI_CNTRY;},'title':function(d){return getCountryTitle(d.properties.GMI_CNTRY);}}).on('click',function(d){$scope.reference=Countries.filter(function(item){return item.GMI_CNTRY===d.properties.GMI_CNTRY;})[0].POPIO_NAME;ga('send','event','ExpectancyMap','click',$scope.reference);});});var _addDescriptionLine=function(type,data){var countryId=data.country.GMI_CNTRY;var textHeight=200;var node=d3.select('.country[data-id="'+countryId+'"]');if(!node[0][0]){return;}
var bbox=node[0][0].getBBox();var center={x:bbox.x+bbox.width/2,y:bbox.y+bbox.height/2};if(countryId=='USA'){center.x=300;}
if(center.y<20){center.y=20;}
if(center.y>height-20){center.y=height-20;}
var _textTween=function(data,node,label,prefix){var value=Math.round(data*10)/10;var i=d3.interpolate(0,value);var prec=(value+'').split('.');var round=(prec.length>1)?Math.pow(10,prec[1].length):1;return function(t){node.textContent=(prefix?prefix+' ':'')+Math.round(i(t)*round)/round+(label?' '+label:'');};};d3.selectAll('.desc-'+type).remove();d3.select('.country-active.country-'+type).classed('country-active',false);node.classed('country-active',true);node.classed('country-'+type,true);var desc=root.append('g').attr({'class':'desc desc-'+type,transform:function(){return 'translate('+[center.x,center.y]+')';}});desc.append('line').attr({'x1':0,'y1':0,'x2':0,'y2':0}).transition().duration(1000).attr({x1:0,x2:function(){if(type==='ref'){return-center.x;}else{return width-center.x;}}});var yearsLeftText=desc.append('g').attr({'class':'text-'+type,transform:function(){var pos=[],y=center.y+textHeight>height?-textHeight:0;if(type==='ref'){pos=[-center.x,y];}else{pos=[width-center.x,y];}
return 'translate('+pos+')';}});yearsLeftText.append('text').text(0).attr({'class':'years-left','transform':'translate(0,45)'}).transition().duration(1000).tween('text',function(){return _textTween(data.yearsLeft,this);});var yearsLeftDescription=yearsLeftText.append('g').attr({'class':'text-block','transform':'translate(0,70)'});yearsLeftDescription.append('text').text($translate.instant('EXPECTANCY_MAP_POINTER_1'));yearsLeftDescription.append('text').attr({'y':20}).text($translate.instant('EXPECTANCY_MAP_POINTER_2')).append('tspan').text($translate.instant(data.country.POPIO_NAME));var deathDate=moment(data.dod).format('DD MMM YYYY');estimationText=yearsLeftText.append('g').attr({'class':'text-block','transform':'translate(0,120)'});estimationText.append('line').attr({'x1':0,'y1':-20,'x2':200*(type==='ref'?1:-1),'y2':-20});estimationText.append('text').attr('y',0).text($translate.instant('EXPECTANCY_MAP_POINTER_3'));estimationText.append('text').text($translate.instant('EXPECTANCY_MAP_POINTER_4')+data.lifeExpectancy).transition().duration(1000).tween('text',function(){return _textTween(data.lifeExpectancy,this,$translate.instant('EXPECTANCY_MAP_POINTER_5'),$translate.instant('EXPECTANCY_MAP_POINTER_4'));}).attr('y',20);estimationText.append('text').attr('y',45).text(deathDate).style({'font-size':20,'fill':'#444'});};var _loadLifeExpectancy=function(type,date,country){if(!country){return;}
var age=ProfileService.getAge();var ageString=ProfileService.getAgeString();var ageDate=new Date(Date.now()-ProfileService.getBirthDate().getTime());var dateString=moment(date).format('YYYY-MM-DD');$scope.$root.loading+=1;PopulationIOService.loadLifeExpectancyRemaining({sex:ProfileService.gender,country:country,date:dateString,age:ageString},function(remainingLife){$scope.$root.loading-=1;var countryObject=Countries.filter(function(item){return item.POPIO_NAME===country;})[0];_addDescriptionLine(type,{country:countryObject,yearsLeft:remainingLife,lifeExpectancy:age+remainingLife+(ageDate.getMonth()/11),dod:(function(){var today=new Date();return today.setDate(today.getDate()+(remainingLife*365));})()});if(type!=='ref'){return;}
angular.forEach(Countries,function(item){var node=d3.select('.country[data-id="'+item.GMI_CNTRY+'"]');if(!node[0][0]){return;}
$scope.$root.loading+=1;PopulationIOService.loadLifeExpectancyRemaining({sex:ProfileService.gender,country:item.POPIO_NAME,date:dateString,age:ageString},function(countryRemainingLife){$scope.$root.loading-=1;if(countryRemainingLife>remainingLife){node.classed('longer',true);}
if(countryRemainingLife<remainingLife){node.classed('shorter',true);}});});});};}]);(function(){'use strict';angular.module('populationioApp').directive('milestones',['$rootScope',function($rootScope){return{restrict:'E',scope:{data:'=',selectedYear:'=',rankGlobal:'=',rankGlobalTotal:'='},link:function($scope,element){var width=460,height=580,yearMax=100,yearMin=0,firstRun=true;var root=d3.select(element[0]).append('svg').attr({width:width,height:height}).append('g').attr({transform:'translate(-20,0)'});$scope.$watch('data',function(data){if(data){_updateGraph(data);}},true);$scope.$watch('selectedYear',function(year){if(year){_removeAllHighlights();var node=d3.select('.dot[data-id="'+year+'"]')[0][0];_addHighlight(node);}},true);var _addHighlight=function(node){var dot=d3.select(node);dot.classed('highlight',true);dot.select('circle').transition().attr({r:10});};var _removeAllHighlights=function(){var dots=d3.selectAll('.dot');dots.select('circle').transition().attr({r:6});dots.classed('highlight',false);};var _initGraph=function(){var bezierCurve=['M428.75,559c0-22.092-17.658-40-39.75-40H89c-22.092,','0-40-17.908-40-40s17.908-40,40-40h300c22.092,0,40-17.908,','40-40s-17.908-40-40-40H89c-22.092,0-40-17.908-40-40s17.908','-40,40-40h300c22.092,0,40-17.908,40-40s-17.908-40-40-40H89','c-22.092,0-40-17.908-40-40s17.908-40,40-40h300c22.092,0,40-','17.908,40-40s-17.908-40-40-40H169.5'].join('');root.append('path').attr({'class':'line',d:bezierCurve});root.append('use').attr({'class':'ticks','xlink:href':'#Layer_1'});root.append('g').attr({'class':'lines'});root.append('g').attr({'class':'circles'});};var _updateGraph=function(data){var path=root.select('.line');var pathNode=path.node();var _getYear=function(d){var zero=0;for(var i=0;i<data.length;i+=1){if(data[i].born){zero=data[i].year;}}
return d.year-zero;};var scale=d3.scale.linear().domain([yearMin,yearMax]).range([0,pathNode.getTotalLength()]);var pathOverlayLine=d3.svg.line().x(function(d){return d.x;}).y(function(d){return d.y;}).interpolate('basis');var pathOverlayData=[];var todayLength=0;for(var i=0;i<data.length;i+=1){if(data[i].now){todayLength=scale(_getYear(data[i]));}}
for(var j=0;j<todayLength;j+=20){pathOverlayData.push(pathNode.getPointAtLength(j));}
pathOverlayData.push(pathNode.getPointAtLength(todayLength));var lines=root.selectAll('.lines');lines.selectAll('path').remove();lines.append('path').attr({'class':'line highlight',d:pathOverlayLine(pathOverlayData)});lines.append('path').attr({'class':'line small',d:pathOverlayLine(pathOverlayData)});var circlesArea=root.select('.circles');var dot=circlesArea.selectAll('.dot').data(function(){var years=[],filteredData=[];for(var i=0;i<data.length;i+=1){if(years.indexOf(data[i].year)===-1){filteredData.push(data[i]);years.push(data[i].year);}}
return filteredData;}).enter().append('g').attr({'data-id':function(d){return d.year;},'class':function(d){return 'dot'+(d.now?' highlight':'');},transform:function(d){var pos=pathNode.getPointAtLength(scale(_getYear(d)));return 'translate('+[pos.x,pos.y]+')';}}).on('click',function(d){$rootScope.$emit('selectedYearChanged',d);}).on('mouseenter',function(){d3.select(this).select('circle').transition().attr({r:10});}).on('mouseleave',function(){if(!d3.select(this).classed('highlight')){d3.select(this).select('circle').transition().attr({r:6});}});var dotWrapper=dot.append('g').attr('class','dot-wrapper');dotWrapper.append('circle').attr({'class':function(d){return d.color?d.color:'';},r:function(d){return d.now?10:6;}});var nowItem=_(data).find(function(item){return item.now;});if(nowItem&&firstRun){$rootScope.$emit('selectedYearChanged',nowItem);firstRun=false;}};_initGraph();}};}]);}());(function(){'use strict';angular.module('populationioApp').directive('page-scroller',function(){return{restrict:'E',link:function($scope,element){var width=380,height=80,handleRadius=11,range=40,margin=30,currentYear=parseInt((new Date()).getFullYear(),0);var data=[];for(var i=(currentYear-range);i<=currentYear;i+=1){data.push({year:i});}
var x=d3.scale.linear().domain([d3.min(data,function(d){return d.year;}),d3.max(data,function(d){return d.year;})]).range([0,width-(margin*2)]);var stepArr=[];var stepWidth=(width-(margin*2))/(data.length-1);for(var j=0;j<data.length;j+=1){stepArr.push(stepWidth*j);}
var drag=d3.behavior.drag().on('drag',function(){if(d3.event.x<0||d3.event.x>(width-(margin*2))){return;}
var bisect=d3.bisector(function(d){return d;}).left,idx=bisect(stepArr,d3.event.x-handleRadius);d3.select(this).attr('transform','translate('+[stepArr[idx],0]+')');this.year=data[idx].year;d3.select(this).select('text')[0][0].textContent=this.year;}).on('dragend',function(){$scope.$emit('timesliderChanged',this.year);});var root=d3.select(element[0]).append('svg').attr({width:width,height:height}).append('g').attr({transform:'translate(0,0)'});var slider=root.append('g').attr({'class':'slider',transform:'translate('+[margin,margin]+')'});slider.append('rect').attr({width:(width-(2*margin))+2,height:4,transform:'translate(-1,-2)'});var axis=slider.selectAll('.x-axis').data(data).enter().append('g').attr({'class':'x-axis'});axis.append('line').attr({x1:function(d){return x(d.year);},y1:function(d,i){if(i===0||i===data.length-1){return 0;}else{return 15;}},x2:function(d){return x(d.year);},y2:22});var handle=slider.append('g').attr({'class':'handle',transform:function(){return 'translate('+[stepArr[stepArr.length-1],0]+')';}}).call(drag);handle.append('circle').attr('r',handleRadius);handle.append('text').text(data[data.length-1].year);axis.append('text').text(function(d,i){if(i%4===0||i===data.length-1){return '\''+(d.year+'').substring(2,4);}}).attr({x:function(d){return x(d.year);}});}};});}());angular.module('populationioApp').directive('rankGraph',['$filter','$translate',function($filter,$translate){return{restrict:'E',scope:{data:'=',country:'=',age:'='},link:function($scope,element){var width=350,height=200,xAxis,xAxisElement,yAxis,yAxisElement,yAxisFormat=d3.format('s');var root=d3.select(element[0]).append('svg').attr({width:width,height:height+20}).append('g').attr({transform:'translate('+[10,-10]+')'});var labelX;var labelY;var labelPointer;$scope.$on('languageChange',function(){if(labelX){labelX.text($translate.instant('MILESTONES_CHART_AXIS_X'));}
if(labelY){labelY.text($translate.instant('MILESTONES_CHART_AXIS_Y'));}
if(labelPointer){labelPointer.text($translate.instant('MILESTONES_CHART_POINTER'));}
root.select('.percentage').text(function(){return $scope.age+' '+$translate.instant('UNIT_YEARS');});});$scope.$watch('data',function(data){if(data){_updateGraph(data);}});var frame=root.append('g').attr({'class':'frame'});var _initGraph=function(){root.append('g').attr('class','chart');root.append('g').attr('class','pointer');xAxisElement=root.append('g').attr('class','x axis').attr({transform:'translate('+[0,height]+')'});yAxisElement=root.append('g').attr('class','y axis').attr({transform:'translate('+[40,0]+')'});yAxis=d3.svg.axis().orient('left').tickFormat(function(d){return yAxisFormat(d);});};var _updateGraph=function(data){labelY=frame.append('text').text($translate.instant('MILESTONES_CHART_AXIS_Y')).attr({'class':'people',transform:function(){return 'translate('+[40,70]+') rotate(-90)';}});labelX=frame.append('text').text($translate.instant('MILESTONES_CHART_AXIS_X')).attr({'class':'age',transform:function(){return 'translate('+[width-60,height+3]+')';}});var ticks=[],step=$scope.country!=='World'?500000:50000000;if($scope.country!=='World'&&d3.max(data,function(d){return d.total;})<=500000000){step=Math.ceil(d3.max(data,function(d){return d.total;})/1000000)*1000000;}
if($scope.country!=='World'&&d3.max(data,function(d){return d.total;})<=500000){step=Math.ceil(d3.max(data,function(d){return d.total;})/100000)*100000;}
if($scope.region!=='World'&&d3.max(data,function(d){return d.total;})<=2000){step=Math.ceil(d3.max(data,function(d){return d.total;})/200)*200;}
for(var i=0;i<d3.max(data,function(d){return d.total;})+step;i=i+step){ticks.push(i);}
var xScale=d3.scale.linear().domain([d3.min(data,function(d){return d.age;}),d3.max(data,function(d){return d.age;})]).range([40,width-100]);var yScale=d3.scale.linear().domain([0,ticks[ticks.length-1]]).range([height,90]);xAxis=d3.svg.axis().scale(xScale).tickFormat(function(d){return d+'y';}).tickValues([0,25,50,75,100]);yAxis.scale(yScale).tickValues(ticks);var area=d3.svg.area().x(function(d){return xScale(d.age);}).y0(function(){return height;}).y1(function(d){return yScale(d.total);}).interpolate('basis');var areaNull=d3.svg.area().x(function(d){return xScale(d.age);}).y0(function(){return height;}).y1(function(){return height;}).interpolate('basis');var chart=root.select('.chart');var path=chart.selectAll('.age-line').data([data]);path.transition().duration(1000).attr('d',function(){return area(data);});path.enter().append('path').attr({d:function(){return areaNull(data);},'class':'age-line'}).transition().duration(1000).attr('d',function(){return area(data);});var bisect=d3.bisector(function(d){return d.age;}).right;var item=data[bisect(data,$scope.age)];if(item){var pointer=root.select('.pointer');var group=pointer.selectAll('.pointer-wrapper').data([item]).enter().append('g').attr('class','pointer-wrapper');if(pointer.select('.percentage').empty()){pointer.attr({transform:function(){return 'translate('+[xScale($scope.age),0]+')';}});}
pointer.transition().duration(1000).attr({transform:'translate('+[xScale($scope.age),0]+')'});group.append('line');pointer.select('line').transition().duration(1000).attr({x1:0,y1:20,x2:0,y2:(yScale(item.total))});group.append('circle').attr({r:3,cx:0,cy:yScale(item.total)-1});var textBlock=group.append('g').attr({'class':'text-block',transform:function(){return 'translate('+[15,35]+')';}});textBlock.append('text').attr({'class':'percentage'});labelPointer=textBlock.append('text').text($translate.instant('MILESTONES_CHART_POINTER')).attr({'class':'desc',transform:function(){return 'translate('+[0,15]+')';}});root.select('.percentage').transition().delay(1000).text(function(){return $scope.age+' '+$translate.instant('UNIT_YEARS');});}
yAxisElement.transition().call(yAxis);xAxisElement.transition().call(xAxis);root.select('circle').transition().duration(1000).attr({cy:yScale(item.total)-1});};_initGraph();}};}]);(function(){'use strict';angular.module('populationioApp').directive('summaryChart',['$filter','ProfileService','PopulationIOService','HelloWords','$timeout',function($filter,ProfileService,PopulationIOService,HelloWords,$timeout){return{restrict:'E',link:function($scope,element){var chart,xAxis,yAxis,actionBox,parentWidth=element[0].clientWidth,currentData,pointer,parentHeight=240,yAxisFormat=d3.format('s'),xRange=d3.scale.linear(),yRange=d3.scale.linear().nice(),line=d3.svg.line(),area=d3.svg.area(),age=0,areaTotal,areaLine,areaYounger,xAxisElement,yAxisElement,xLabel,yLabel,yLabelText,xLabelText,xLabelLine,yLabelLine,tooltip=d3.select('.chart-tooltip');_initChart();$scope.$watch('region',function(newVal){if(newVal==='World'&&$scope.worldPopulationData){_updateChart($scope.worldPopulationData);}
else if(newVal!=='World'&&$scope.countryPopulationData){_updateChart($scope.countryPopulationData);}});$scope.$on('worldPopulationDataChanged',function(e,population){$timeout(function(){age=ProfileService.getAge();_updateChart(population);},2000);});if(ProfileService.rankGlobal>-1){$scope.rankGlobal=ProfileService.rankGlobal;}
if(ProfileService.rankLocal>-1){$scope.rankLocal=ProfileService.rankLocal;}
$scope.$on('rankGlobalChanged',function(e,rank){$scope.rankGlobal=rank;if($scope.region=='World'&&$scope.worldPopulationData){_updateChart($scope.worldPopulationData)}
else if($scope.region!='World'&&$scope.countryPopulationData){_updateChart($scope.countryPopulationData)}});$scope.$on('countryPopulationDataChanged',function(e,population){age=ProfileService.getAge();_updateChart(population);});function _initChart(){chart=d3.select(element[0]).append('svg').attr({width:parentWidth,height:parentHeight+100}).append('g').attr({class:'summary-chart',transform:'translate(0,80)'});xAxis=d3.svg.axis().scale(xRange).tickSize(5).tickValues([0,25,50,75,100,125,150]);yAxis=d3.svg.axis().scale(yRange).tickSize(5).orient('left');areaTotal=chart.append('path');areaYounger=chart.append('path');areaLine=chart.append('path');chart.select('.x-label').remove();chart.select('.y-label').remove();chart.select('.label-line').remove();xLabelText=$filter('translate')('SUMMARY_CHART_AXIS_X');xLabel=chart.append('text').text(xLabelText).attr({class:'x-label',transform:'translate('+[parentWidth-100,parentHeight-100+16]+')'}).style({'text-anchor':'end'});xLabelLine=chart.append('line').attr({class:'label-line',x1:parentWidth-200,y1:parentHeight-100,x2:parentWidth-70,y2:parentHeight-100}).style({stroke:'#d9d9d9','stroke-width':1});yLabelText=$filter('translate')('SUMMARY_CHART_AXIS_Y');yLabel=chart.append('text').text(yLabelText).attr({class:'y-label',transform:'translate('+[110,-20]+')'}).style({'text-anchor':'end'});yLabelLine=chart.append('line').attr({class:'label-line',x1:120,y1:-40,x2:120,y2:0}).style({stroke:'#d9d9d9','stroke-width':1});xAxisElement=chart.append('g');yAxisElement=chart.append('g');pointer=chart.append('g').attr({class:'pointer'});pointer.append('line').attr({x1:0,y1:10,x2:0,y2:0}).style({stroke:'#333','stroke-width':'1px'});pointer.append('text').style({fill:'#333','text-anchor':'middle'});pointer.append('circle').attr({r:6}).attr('stroke-width',2).style({fill:'black',stroke:'white'});actionBox=chart.append('rect').style({fill:'red',opacity:0}).attr({transform:'translate(120,-40)',width:parentWidth-280,height:180});actionBox.on('mouseenter',_showTooltip).on('mousemove',function(){var mouse=d3.mouse(this);var currentAgeObject=_.find(currentData,function(item){return item.age==parseInt(xRange.invert(mouse[0]+120),10)});var ageFormatted=$filter('number')(parseInt(xRange.invert(mouse[0]+120),10),0);var populationFormatted=$filter('number')(currentAgeObject.total,0);tooltip.html(function(d,i){return "<p><span class='tooltip-label'>Age:</span><span class='tooltip-value'>"+ageFormatted+" years</span></p>"
+"<p><span class='tooltip-label'>Population:</span><span class='tooltip-value'>"+populationFormatted+"</span></p>";});tooltip.style("left",(d3.event.pageX-100)+"px").style("top",(d3.event.pageY-d3.mouse(this)[1]-80)+"px");}).on('mouseleave',_hideTooltip);function _showTooltip(){tooltip.attr({class:'chart-tooltip summary'}).transition().duration(200).style({display:'block',opacity:0.9});}
function _hideTooltip(){tooltip.transition().duration(200).style("opacity",0).each('end',function(){d3.select(this).style({display:'none'}).attr({class:'chart-tooltip'})});}}
function _updateChart(data){currentData=data;var ticks=[],step;step=$scope.region!='World'?500000:50000000;if($scope.country!='World'&&d3.max(data,function(d){return d.total;})<=500000000){step=Math.ceil(d3.max(data,function(d){return d.total;})/1000000)*1000000}
if($scope.region!='World'&&d3.max(data,function(d){return d.total;})<=500000){step=Math.ceil(d3.max(data,function(d){return d.total;})/100000)*100000}
if($scope.region!='World'&&d3.max(data,function(d){return d.total;})<=2000){step=Math.ceil(d3.max(data,function(d){return d.total;})/200)*200}
for(var i=0;i<d3.max(data,function(d){return d.total;})+step;i=i+step){ticks.push(i)}
xAxis.tickFormat(function(d){return d+'y'});yAxis.tickFormat(function(d){return yAxisFormat(d).replace('k','K')}).tickValues(ticks);xRange.range([120,parentWidth-160]).domain([0,d3.max(data,function(d){return d.age;})]);yRange.range([parentHeight-100,0]).domain([0,ticks[ticks.length-1]]);yLabelText=$filter('translate')('SUMMARY_CHART_AXIS_Y');yLabel.text(yLabelText);xLabelText=$filter('translate')('SUMMARY_CHART_AXIS_X');xLabel.text(xLabelText);line.x(function(d){return xRange(d.age);}).y(function(d){return yRange(d.total);}).interpolate('linear');area.x(function(d){return xRange(d.age);}).y0(parentHeight-100).y1(function(d){return yRange(d.total);});var younger=data.slice(0,age+1);areaTotal.datum(data).transition().attr('d',area(data)).attr('fill','#EBEBEB');areaYounger.transition().attr('d',area(younger)).attr('fill','#BDAEE9');areaLine.transition().attr('d',line(data)).attr('fill','none');xAxisElement.transition().attr('class','x axis').attr('transform','translate(0,'+(parentHeight-100)+')').call(xAxis);yAxisElement.transition().attr('class','y axis').attr('transform','translate(120,0)').call(yAxis);pointer.transition().attr({transform:'translate('+[xRange(age),-40]+')'});var totalOfAge=data!==undefined&&data[age]!==undefined?data[age].total:0;pointer.select('line').transition().attr({y2:yRange(totalOfAge)+40});pointer.select('circle').transition().attr({cy:yRange(totalOfAge)+40});pointer.select('text').text(function(){if($scope.region!='World'){return $filter('number')(Math.min(100,$scope.rankLocal/($scope.countryPopulation/100)),'0')+'%'}
else{return $filter('number')(Math.min(100,$scope.rankGlobal/($scope.worldPopulation/100)),'0')+'%'}})}}};}]);}());(function(){'use strict';angular.module('populationioApp').directive('timeSlider',function(){return{restrict:'E',link:function($scope,element){var width=540,height=80,handleRadius=11,range=50,margin=30,currentYear=parseInt((new Date()).getFullYear(),0);var data=[];for(var i=(currentYear-range);i<=currentYear;i+=1){data.push(new Date(i,1,1));}
var grid=width/(data.length-1);var x=d3.time.scale().domain([d3.min(data,function(d){return d;}),d3.max(data,function(d){return d;})]).range([0,width]);var _selectYear=function(pos){var handle=root.select('.handle');handle.attr('transform','translate('+[(pos*grid)-1,0]+')');handle.select('text')[0][0].textContent=data[pos].getFullYear();};var drag=d3.behavior.drag().on('drag',function(){var pos=Math.round(d3.event.x/grid);if(pos<0||pos>data.length-1){return;}
this.year=data[pos].getFullYear();_selectYear(pos);}).on('dragend',function(){$scope.$emit('timesliderChanged',this.year);});var root=d3.select(element[0]).append('svg').attr({width:width+(margin*2),height:height}).append('g').attr({transform:'translate(0,0)'});var slider=root.append('g').attr({'class':'slider',transform:'translate('+[margin,margin]+')'});var axis=slider.append('g').attr({'class':'x-axis'});axis.call(d3.svg.axis().scale(x).orient('bottom').ticks(range/2).tickFormat(d3.time.format('%y')));axis.append('g').classed('tick',true).append('text').attr({'y':9,'dy':'.71em'}).text(data[0].getYear());axis.selectAll('line').attr({y2:function(d,i){if(i===(range/2)-1){return 0;}
if(d.getYear()%10===0){return 16;}else{return 8;}}});axis.selectAll('text').attr('dy','2em');var handle=slider.append('g').attr({'class':'handle'}).call(drag);handle.append('circle').attr('r',handleRadius);handle.append('text').attr('transform','translate(0,-16)');_selectYear(data.length-1);}};});}());angular.module('populationioApp').directive('validateDay',function(){return{require:'ngModel',link:function(scope,elm,attrs,ctrl){ctrl.$validators.day=function(modelValue,viewValue){var value=parseInt(viewValue,0);if(value&&value>0&&value<32){return true;}
return false;};}};});angular.module('populationioApp').directive('validateMonth',['$translate',function($translate){return{require:'ngModel',link:function(scope,elm,attrs,ctrl){ctrl.$validators.month=function(modelValue){var value=parseInt(modelValue,0);if(value&&value>0&&value<13){return true;}
return false;};ctrl.$formatters.push(function(value){'use strict';if(value){return $translate.instant('MONTH'+parseInt(value,0));}
return value;});}};}]);angular.module('populationioApp').directive('validateYear',function(){return{require:'ngModel',link:function(scope,elm,attrs,ctrl){ctrl.$validators.year=function($viewValue){var value=parseInt($viewValue,0);if(value&&value>1919&&value<=new Date().getFullYear()){return true;}
return false;};}};});angular.module('populationioApp').directive('validateCountry',['Countries',function(Countries){return{require:'ngModel',link:function(scope,elm,attrs,ctrl){ctrl.$validators.country=function(modelValue){var countriesFiltered=_.filter(Countries,function(v){return v.POPIO_NAME.toLowerCase()===modelValue.toLowerCase();});if(countriesFiltered.length){return true;}
return false;};}};}]);(function(){'use strict';angular.module('populationioApp').directive('worldClock',['$filter','PopulationIOService','HelloWords',function($filter,PopulationIOService,HelloWords){return{restrict:'E',link:function($scope,element){var digits,countElement,clockElement,digit,placeholder,digitText,placeholderText,chart,babiesArea,babiesList,lastReborn,countryTitle,digitCellWidth=26,animationDuration=400,parentWidth=1200,parentHeight=220,currentValue=0;var root=d3.select(element[0]).append('svg').attr({height:parentHeight});chart=root.append('g').attr({'class':'chart-wrapper',height:parentHeight});var probabilityArray=[];var probabilityCount=0;for(var c=0;c<HelloWords.length;c++){probabilityCount=HelloWords[c].probability*1000;if(probabilityCount>0){for(var p=0;p<probabilityCount;p++){probabilityArray.push(c);}}}
function updateWindow(){var d=document,e=d.documentElement,x=e.clientWidth;root.attr('width',x);chart.attr({transform:'translate('+[x/2-parentWidth/2,0]+')'});}
window.onresize=updateWindow;updateWindow();$scope.$watch('worldPopulation',function(newVal,oldVal){_updateWorldClock(newVal,oldVal);});function _initWorldClock(){currentValue=7000000000;var filteredNumber=$filter('number')(currentValue,0);digits=(''+filteredNumber).split('');chart.append('defs').append('svg:clipPath').attr('id','clip').append('rect').attr('id','clip-rect').attr('x','0').attr('y','0').attr('width',digits.length*digitCellWidth).attr('height',40);clockElement=chart.append('g').attr('class','counter').attr({'clip-path':'url(#clip)',transform:'translate(230, 112)'});countElement=clockElement.selectAll('.count-element').data(digits).enter().append('g').attr({'class':'count-element',transform:function(d,i){return 'translate('+[(i*digitCellWidth),0]+')';}});placeholder=countElement.append('g').attr({'class':'placeholder','data-id':function(d,i){return i;},transform:'translate(0,40)'});placeholder.append('rect').attr({fill:'transparent',width:digitCellWidth,height:40});placeholderText=placeholder.append('text').text(function(d){return d;}).attr({transform:'translate('+digitCellWidth/2+',35)'});digit=countElement.append('g').attr({'class':'digit','data-id':function(d,i){return i;}});digit.append('rect').attr({fill:'transparent',width:digitCellWidth,height:40});digitText=digit.append('text').text(function(d){return d;}).attr({transform:'translate('+digitCellWidth/2+',35)'});}
function _updateWorldClock(newVal){var timeDelta=3;currentValue=newVal;function _addNewBabyHelper(sayHello,i){setTimeout(function(){_addNewBaby(sayHello);},i*200);}
var filteredNumber=$filter('number')(newVal,0);var digits=(''+filteredNumber).split('');for(var i=0;i<timeDelta;i++){if(i===0){_addNewBabyHelper(true,i);}else{_addNewBabyHelper(false,i);}}
placeholderText.text(function(d,i){return digits[i];});digit.each(function(d,i){var _digit,_placeholder;if(digits[i]!==d3.select(this).select('text').text()){_digit=d3.select(this);_placeholder=d3.select('.placeholder[data-id="'+i+'"]');_digit.transition().ease('bounce').duration(animationDuration).delay(animationDuration).attr({transform:'translate(0,-40)'});_placeholder.transition().ease('bounce').duration(animationDuration).delay(animationDuration).attr({transform:'translate(0,0)'});setTimeout(function(){_digit.attr('transform','translate(0,0)');_placeholder.attr('transform','translate(0,40)');digitText.text(function(d,i){return digits[i];});},animationDuration*2+100);}});}
var _addHelloBubble=function(baby,helloText){var helloBubble=baby.append('g').attr({'class':'hello-bubble',transform:'translate(-30,-90)',opacity:0});helloBubble.append('use').attr({'xlink:href':'#hello-bubble'});helloBubble.append('text').attr({'fill':'white','text-anchor':'middle','dominant-baseline':'middle',transform:'translate(49,45)'});if(helloText){helloBubble.select('text').text(helloText).each(function(){var bbox=this.getBBox();this.scale=Math.min(60/bbox.width,40/bbox.height);}).style('font-size',function(){return(14*this.scale)+'px';});}};function _initBabiesFlood(){babiesList=[];for(var i=0;i<15;i+=1){babiesList.push({});}
lastReborn=babiesList.length;babiesArea=chart.append('g').attr({'class':'babies-area'});chart.append('rect').attr({'class':'country-title-background',transform:'translate('+[510,180]+')',fill:'#fff',width:400,height:60}).text('hello');chart.append('rect').attr({'class':'country-title-line',transform:'translate('+[0,180]+')',fill:'#ccc',width:parentWidth,height:1});countryTitle=chart.append('text').attr({'class':'country-title',transform:'translate('+[697,210]+')'}).text('Hello');var baby=babiesArea.selectAll('.baby').data(babiesList).enter().append('g').attr({'class':'baby',opacity:function(d,i){this.idx=i;return 1;}});baby.append('use').attr({'xlink:href':function(){return['#baby-girl','#baby-boy'][_.random(0,1)];}});_addHelloBubble(baby);babiesArea.attr('transform',function(){return 'translate('+[135+parentWidth/2,100]+')';});_addNewBaby();}
function _addNewBaby(sayHello){if(d3.selectAll('.baby').size()>30){var babyToRemove=d3.selectAll('.baby')[0][0];d3.select(babyToRemove).remove();}
var babies=d3.selectAll('.baby');babies.transition().duration(250).attr({'data-i':function(d,i){return i;},opacity:1,transform:function(){var translate='translate('+[this.idx*30,0]+')';this.idx+=1;return translate;}});var randomItem=probabilityArray[Math.floor(Math.random()*probabilityArray.length)];var hello=HelloWords[randomItem].greeting;var country=HelloWords[randomItem].language;var newBaby=babiesArea.append('g').attr({'class':function(){this.idx=1;this.helloWord=hello;return 'baby';},opacity:0,transform:'translate(-70,90)'});newBaby.append('use').attr({'xlink:href':function(){return['#baby-girl','#baby-boy'][_.random(0,1)];}});newBaby.transition().duration(150).attr({opacity:1,transform:'translate(-70,50)'});countryTitle.text(country);_addHelloBubble(newBaby,hello);if(sayHello){_sayHello(newBaby);}}
function _sayHello(baby){var bubble=baby.select('.hello-bubble');bubble.transition().duration(400).attr({opacity:1}).transition().duration(200).delay(1000).attr({opacity:0});}
_initWorldClock();_initBabiesFlood();}};}]);}());angular.module('populationioApp').controller('BirthdaysCtrl',['$scope','$filter','PopulationIOService','ProfileService',function($scope,$filter,PopulationIOService,ProfileService){'use strict';var countries=[];var dataLoaded=false;var profileUpdated=false;d3.csv('data/countries.csv',function(data){countries=data;dataLoaded=true;if(profileUpdated){update();}});$scope.$on('profileUpdated',function(){profileUpdated=true;if(dataLoaded){update();}});var _getCountry=function(name){for(var i=0;i<countries.length;i+=1){var country=countries[i];if(country.POPIO_NAME===name){return country;}}
return null;};var _getContinentByCountry=function(name){for(var i=0;i<countries.length;i+=1){var country=countries[i];if(country.POPIO_NAME===name){return country.CONTINENT;}}
return null;};var _getCountriesByContinent=function(continent){var res=[];for(var i=0;i<countries.length;i+=1){var country=countries[i];if(country.CONTINENT===continent){res.push(country.POPIO_NAME);}}
return res;};$scope.$watch('selectedContinental',function(newValue,oldValue){if(ProfileService.active&&oldValue!==newValue){_updateContinentalCountries();}});var _updateContinentalCountries=function(){$scope.continentsData=[];var continentalCountries=_getCountriesByContinent($scope.selectedContinental);_loadAllCountryBirthdays(continentalCountries,function(country,birthdays){if(country&&birthdays&&parseInt(birthdays,0)>0){$scope.continentsData.push({countryAbbr:_getCountry(country).GMI_CNTRY,countryTitle:country,value:birthdays});}
$scope.$broadcast('continentsDataLoaded');});};var _updateCountriesAroundTheWorld=function(){$scope.worldData=[];var countriesAroundTheWorld=['China','India','United States','Indonesia','Brazil','Pakistan','Russian Federation','Japan','Nigeria','Bangladesh','Mexico'];_loadAllCountryBirthdays(countriesAroundTheWorld,function(country,birthdays){if(country&&birthdays){$scope.worldData.push({countryAbbr:_getCountry(country).GMI_CNTRY,countryTitle:country,value:birthdays});}
$scope.$broadcast('worldDataLoaded');});};var _loadAllCountryBirthdays=function(countries,callback){$scope.$root.loading+=1;PopulationIOService.loadPopulationByAge({year:$filter('date')(Date.now(),'yyyy'),age:ProfileService.getAge()},function(data){data.forEach(function(element){var country=_getCountry(element.country);if(country!==null&&countries.indexOf(element.country)!==-1&&country.GMI_CNTRY){callback(element.country,element.total/365);}});$scope.$root.loading-=1;},function(){$scope.$root.loading-=1;});};var update=function(){$scope.selectedContinental=_getContinentByCountry(ProfileService.country);$scope.country=ProfileService.country;$scope.$root.loading+=1;PopulationIOService.loadPopulationByCountryAndAge({year:$filter('date')(Date.now(),'yyyy'),country:'World',age:ProfileService.getAge()},function(data){$scope.sharedDay=parseInt(data[0].total/365,0);$scope.sharedHour=parseInt(data[0].total/365/24,0);$scope.$root.loading-=1;},function(){$scope.$root.loading-=1;});_updateCountriesAroundTheWorld();};}]);angular.module('populationioApp').controller('DeathCtrl',['$scope','$filter','$translate','ProfileService','PopulationIOService',function($scope,$filter,$translate,ProfileService,PopulationIOService){'use strict';$scope.type='distribution';$scope.$on('languageChange',function(){$scope.country=$translate.instant(ProfileService.country);});$scope.$on('profileUpdated',function(){$scope.country=$translate.instant(ProfileService.country);$scope.$root.loading+=1;PopulationIOService.loadMortalityDistribution({country:ProfileService.country,gender:ProfileService.gender,age:ProfileService.getAge()},function(data){$scope.$root.loading-=1;$scope.mortalityDistributionData=data;if(data){$scope.$root.$broadcast('mortalityDistributionDataChanged',data);}});$scope.$root.loading+=1;PopulationIOService.loadLifeExpectancyRemaining({sex:ProfileService.gender,country:'World',date:$filter('date')(new Date(),'yyyy-MM-dd'),age:ProfileService.getAgeString()},function(remainingLife){var today=new Date();$scope.$root.loading-=1;$scope.dodWorld=today.setDate(today.getDate()+(remainingLife*365));$scope.remainingLifeWorldInYears=parseFloat(remainingLife).toFixed(1);$scope.totalLifeWorldInYears=moment(today).diff(moment(ProfileService.birthday.year,'YYYY'),'years',true);});$scope.$root.loading+=1;PopulationIOService.loadLifeExpectancyRemaining({sex:ProfileService.gender,country:ProfileService.country,date:$filter('date')(new Date(),'yyyy-MM-dd'),age:ProfileService.getAgeString()},function(remainingLife){var today=new Date();$scope.$root.loading-=1;$scope.dodCountry=today.setDate(today.getDate()+(remainingLife*365));$scope.remainingLifeCountryInYears=parseFloat(remainingLife).toFixed(1);$scope.totalLifeCountryInYears=moment(today).diff(moment(ProfileService.birthday.year,'YYYY'),'years',true);});var updateValues=function(){var c=moment($scope.dodCountry);var w=moment($scope.dodWorld);var diffDays=c.diff(w,'days');var diffYears=c.diff(w,'years');$scope.differenceInDays=diffDays<0?'- '+(-1*diffDays):'+ '+diffDays;$scope.differenceInDays+=' '+$translate.instant('UNIT_DAYS');$scope.soMuchToDo=diffDays<1?$translate.instant('DEATH_EXPECTANCY_TXT_SHORTER'):$translate.instant('DEATH_EXPECTANCY_TXT_LONGER');if(diffYears<1&&diffYears>-1){$scope.differenceInUnits=diffDays.toString().replace('-','')+' '+$translate.instant('UNIT_DAYS');}else{if(Math.abs(diffYears)<=1){$scope.differenceInUnits=diffYears.toString().replace('-','')+' '+$translate.instant('UNIT_YEAR');}else{$scope.differenceInUnits=diffYears.toString().replace('-','')+' '+$translate.instant('UNIT_YEARS');}}};$scope.$on('languageChange',function(){updateValues();});$scope.$watchGroup(['remainingLifeCountryInYears','remainingLifeWorldInYears'],function(newVals,oldVals){if((newVals[0]&&newVals[1])&&(newVals[0]!==oldVals[0]&&newVals[1]!==oldVals[0])){updateValues();}});});}]);angular.module('populationioApp').controller('ExpectancyCtrl',['$scope','ProfileService','Countries',function($scope,ProfileService,Countries){'use strict';var skipSendingCurrentCountryEvent=false;var skipSendingReferenceCountryEvent=false;$scope.countries=Countries;$scope.$root.$on('profileUpdated',function(){skipSendingCurrentCountryEvent=true;skipSendingReferenceCountryEvent=true;$scope.currentCountry=ProfileService.country;$scope.referenceCountry='';$scope.$applyAsync(function(){skipSendingCurrentCountryEvent=false;skipSendingReferenceCountryEvent=false;});});$scope.$on('languageChange',function(){skipSendingCurrentCountryEvent=true;skipSendingReferenceCountryEvent=true;var currentCountry=$scope.currentCountry;var referenceCountry=$scope.referenceCountry;$scope.currentCountry='';$scope.referenceCountry='';$scope.$applyAsync(function(){$scope.currentCountry=currentCountry;$scope.referenceCountry=referenceCountry;$scope.$applyAsync(function(){skipSendingCurrentCountryEvent=false;skipSendingReferenceCountryEvent=false;});});});$scope.$watch('currentCountry',function(n){if(n!==null&&n!==undefined&&n!==''&&!skipSendingCurrentCountryEvent){ga('send','event','ExpectancyMap','local_country_change',n);}});$scope.$watch('referenceCountry',function(n){if(n!==null&&n!==undefined&&n!==''&&!skipSendingReferenceCountryEvent){ga('send','event','ExpectancyMap','reference_country_change',n);}});}]);angular.module('populationioApp').controller('HomeCtrl',['$scope','$timeout','$location','$translate','ProfileService','Countries',function($scope,$timeout,$location,$translate,ProfileService,Countries){'use strict';$scope.$on('languageChange',function(){$scope.months=[{label:$translate.instant('MONTH1'),value:'01'},{label:$translate.instant('MONTH2'),value:'02'},{label:$translate.instant('MONTH3'),value:'03'},{label:$translate.instant('MONTH4'),value:'04'},{label:$translate.instant('MONTH5'),value:'05'},{label:$translate.instant('MONTH6'),value:'06'},{label:$translate.instant('MONTH7'),value:'07'},{label:$translate.instant('MONTH8'),value:'08'},{label:$translate.instant('MONTH9'),value:'09'},{label:$translate.instant('MONTH10'),value:'10'},{label:$translate.instant('MONTH11'),value:'11'},{label:$translate.instant('MONTH12'),value:'12'}];});$scope.$on('profileUpdated',function(){$scope.$root.expanded=true;$scope.profile=$.extend(true,{},ProfileService);});var birthdayTouchEvent=false;$scope.$watchGroup(['profile.birthday.day','profile.birthday.month','profile.birthday.year','profile.country'],function(values){var current=_.reject(values,function(item){return item===undefined||item===null||item==='';});if(current.length>0&&!birthdayTouchEvent){ga('send','event','Birthday','input');birthdayTouchEvent=true;}});$scope.$on('languageChange',function(){var month=$scope.profile.birthday.month;var country=$scope.profile.country;$scope.profile.birthday.month='';$scope.profile.country='';$scope.$applyAsync(function(){$scope.profile.birthday.month=month;$scope.profile.country=country;});});$scope.hasValidBirthday=function(birthday){if($scope.goForm.year.$touched&&$scope.goForm.year.$dirty&&$scope.goForm.year.$invalid){return false;}
if(!birthday.day||!birthday.month||!birthday.year){return true;}
var date=moment(birthday.day+'-'+birthday.month+'-'+birthday.year,'DD-MM-YYYY');var today=moment();var first=moment('01-01-1920','DD-MM-YYYY');var isValid=date.isSameOrBefore(today)&&date.isSameOrAfter(first);$scope.goForm.day.$setValidity('day',isValid);$scope.goForm.month.$setValidity('month',isValid);$scope.goForm.year.$setValidity('year',isValid);return isValid;};$scope.goGoGadget=function(){if($scope.goForm.$invalid){$scope.highlightErrors=true;$scope.highlightExtra=true;$timeout(function(){$scope.highlightExtra=false;},2000);return;}
$location.path([$scope.profile.birthday.year,$scope.profile.birthday.month,$scope.profile.birthday.day,$scope.profile.gender,$scope.profile.country,'summary'].join('/'));};$scope.countries=Countries;$scope.profile={birthday:{year:'',month:'',day:''},gender:'female',country:''};}]);angular.module('populationioApp').controller('MainCtrl',['$translate','$scope','$http','$interval','$uibModal','$location','$document','$filter','moment','ProfileService','PopulationIOService','WorldPovertyIOService','BrowserService','Countries','LanguageService',function($translate,$scope,$http,$interval,$uibModal,$location,$document,$filter,moment,ProfileService,PopulationIOService,WorldPovertyIOService,BrowserService,Countries,LanguageService){'use strict';$scope.$root.loading=0;$scope.$root.$on('$translateChangeSuccess',function(){$scope.pageHeader={title:$translate.instant('HEADER_TITLE'),menuAbout:$translate.instant('HEADER_MENU_ABOUT'),menuMethodology:$translate.instant('HEADER_MENU_METHODOLOGY'),menuApi:$translate.instant('HEADER_MENU_API')};});var rightNow=moment();var todayMidnight=rightNow.clone().startOf('day');$scope.worldPoverty=0;WorldPovertyIOService.getWorldPoverty({date:rightNow.format('YYYY-MM-DD'),seconds:rightNow.diff(todayMidnight,'seconds')},function(data){var poverty=data.headcount_in_poverty;$scope.worldPoverty=poverty;var tomorrow=rightNow.clone().add(1,'days');var tomorrowMidnight=tomorrow.clone().startOf('day');return WorldPovertyIOService.getWorldPoverty({date:tomorrow.format('YYYY-MM-DD'),seconds:tomorrow.diff(tomorrowMidnight,'seconds')},function(data){var dayInSeconds=86400;var povertySpeed=dayInSeconds/(data.headcount_in_poverty-poverty);return setInterval(function(){$scope.worldPoverty+=(povertySpeed>0)?1:-1;},Math.abs(povertySpeed)*1000);});});$scope.changeLanguage=LanguageService.change;$scope.languages=LanguageService.supportedLanguages;$scope.getLanguageTitle=LanguageService.getTitle;$scope.profile=ProfileService;$scope.$root.countriesList=function(newVal){newVal=$translate.instant(newVal).toLowerCase();var alternativeName=newVal;var aliases=[{alias:'Great Britain',country:'United Kingdom'},{alias:'Britain',country:'United Kingdom'},{alias:'England',country:'United Kingdom'},{alias:'United States of America',country:'United States'},{alias:'USA',country:'United States'},{alias:'Egypt',country:'Arab Rep of Egypt'},{alias:'North Korea',country:'Dem Peoples Rep of Korea'},{alias:'South Korea',country:'Rep of Korea'}];var foundAlias=_.find(aliases,function(item){return item.alias.toLowerCase().indexOf(newVal.toLowerCase())>-1;});if(foundAlias){alternativeName=foundAlias.country.toLowerCase();}
return _.map(_.filter(Countries,function(v){var name=$translate.instant(v.POPIO_NAME).toLowerCase();return name.indexOf(alternativeName)>-1||name.indexOf(newVal)>-1;}),function(v){return{label:$translate.instant(v.POPIO_NAME),value:v.POPIO_NAME};});};$scope.rankGlobal=0;if(!BrowserService.isSupported()){$uibModal.open({templateUrl:'browser-warning.html'});}
$scope.clockType='world';$scope.worldPopulation=0;PopulationIOService.getWorldPopulation(function(data){$scope.worldPopulation=data.total_population[1].population;$scope.worldPopulationToday=data.total_population[0].population;$scope.worldPopulationTomorrow=data.total_population[1].population;$scope.peopleBornPerSecond=Math.ceil((data.total_population[1].population-data.total_population[0].population)/(24*60*60));});$interval(function(){$scope.worldPopulation+=$scope.peopleBornPerSecond;},1000);$scope.$on('profileUpdated',function(){$scope.$applyAsync(function(){$scope.showSection('summary');});});$scope.$on('$locationChangeSuccess',function(e,newValue){var hashPosition=newValue.indexOf('#/');var hash=decodeURIComponent(newValue.substr(hashPosition+2,newValue.length));var newLocation=hash.split('/');if(newLocation.length!==6){return;}
var year=newLocation[0];var month=newLocation[1];var day=newLocation[2];var gender=newLocation[3];var country=newLocation[4];if(['female','male'].indexOf(gender)>-1&&(ProfileService.birthday.year!==year||ProfileService.birthday.month!==month||ProfileService.birthday.day!==day||ProfileService.gender!==gender||ProfileService.country!==country)){ProfileService.gender=gender;ProfileService.country=country;ProfileService.birthday={year:year,month:month,day:day};ProfileService.update();}});var currentId='';var sendPageView=function(page){ga('set','page','/'+page);ga('send','pageview');};var sendAnalyticsNavigation=function(element){var id=element.attr('id');if(id==='home'){id='';}
if(id!==currentId){currentId=id;sendPageView(id);}};$scope.$root.$on('duScrollspy:becameActive',function($event,$element){var section=$element.prop('id');if(section){var path=$location.$$path.replace(/[^/]*$/g,''),pathItems=$location.$$path.split('/');if(pathItems.length>4){$location.preventReload=true;$location.path(path+section).replace();$scope.$root.currentPage=$element.attr('data-index');$scope.$root.$apply();sendAnalyticsNavigation($element);}}});$scope.downloadICal=function(){if(!ProfileService.active){alert(['Please fill out the form and press ','"Go" for getting your Date of Death!'].join(''));return;}
var cal=ics(),dstart=$filter('date')(ProfileService.dod,'yyyy-MM-dd'),dend=$filter('date')(ProfileService.dod,'yyyy-MM-dd'),dob=ProfileService.getFormattedBirthday(),dod=$filter('date')(ProfileService.dod,'yyyy-MM-dd'),dsum='Your Date of Death',url='http://population.io',ddesc=['According to your birthday '+dob,' and the life expectancy in '+ProfileService.country,' you will die on '+dod,' . http://population.io'].join('');cal.addEvent(dsum,ddesc,'',dstart,dend,url);cal.download();};$scope.showSection=function(id){var section=document.getElementById(id)||document.getElementById('home');var sectionElement=angular.element(section);$document.scrollToElement(sectionElement,80,1000);};$scope.showHomepage=function(){ga('send','event','GoUpButton','click');$scope.showSection('home');};var sendCurrentPageView=function(){sendPageView(currentId);};$scope.showAbout=function(){sendPageView('about');$uibModal.open({templateUrl:'about.html'}).result.then(sendCurrentPageView,sendCurrentPageView);};$scope.showMethodology=function(){sendPageView('methodology');$uibModal.open({templateUrl:'methodology.html'}).result.then(sendCurrentPageView,sendCurrentPageView);};$scope.showDevelopers=function(){$uibModal.open({templateUrl:'developers.html'}).result.then(sendCurrentPageView,sendCurrentPageView);sendPageView('api');};$scope.showImpressum=function(){sendPageView('impressum');$uibModal.open({templateUrl:'impressum.html'}).result.then(sendCurrentPageView,sendCurrentPageView);};}]);function ApiAccessRequestCALLBACK(data){$("#API_FORM_SUBMIT").html("Submits");if(data.result=="error"){alert("Error:\n"+data.msg);}else{$("#API_FORM_CLOSE").click();alert(data.msg);}}
function sendApiAccessRequest(submit_btn){if($(submit_btn).html()=="Please wait...")return;var name=$("#API_FORM_NAME").val(),org=$("#API_FORM_ORG").val(),email=$("#API_FORM_EMAIL").val();if(name.length==0||org.length==0||email.length==0){alert("Input fields cannot be empty.");return;}
if(email.indexOf("@")==-1||email.indexOf(".")==-1){alert("Invalid E-Mail format.");return;}
var s=document.createElement("script");s.type="text/javascript";s.src="https://worlddata.us13.list-manage.com/subscribe/post-json?u=3840f1496862a7a719676d23a&id=1c49c5e299&EMAIL="+encodeURI(email)+"&NAME="+encodeURI(name)+"&OCCUPATION="+encodeURI(org)+"&c=ApiAccessRequestCALLBACK";$("head").append(s);$(submit_btn).html("Please wait...");}
angular.module('populationioApp').controller('MilestonesCtrl',['$scope','$filter','$translate','$sce','ProfileService','PopulationIOService',function($scope,$filter,$translate,$sce,ProfileService,PopulationIOService){'use strict';var getMilestoneTitle=function(title){switch(title){case 'lifeExpWorld':return $translate.instant('MILESTONES_MILESTONE_LIFE_EXPECTANCY',{in:'auf der'})+$translate.instant('LOCAL_WORLD');case 'lifeExpCountry':return $translate.instant('MILESTONES_MILESTONE_LIFE_EXPECTANCY',{in:'in'})+$translate.instant(ProfileService.country);case 'ORDINAL_NUMBER_1':return $translate.instant('MILESTONES_MILESTONE_1_BILLION');case 'ORDINAL_NUMBER_2':return $translate.instant('MILESTONES_MILESTONE_2_BILLION');case 'ORDINAL_NUMBER_3':return $translate.instant('MILESTONES_MILESTONE_3_BILLION');case 'ORDINAL_NUMBER_4':return $translate.instant('MILESTONES_MILESTONE_4_BILLION');case 'ORDINAL_NUMBER_5':return $translate.instant('MILESTONES_MILESTONE_5_BILLION');case 'ORDINAL_NUMBER_6':return $translate.instant('MILESTONES_MILESTONE_6_BILLION');case 'ORDINAL_NUMBER_7':return $translate.instant('MILESTONES_MILESTONE_7_BILLION');case 'ORDINAL_NUMBER_8':return $translate.instant('MILESTONES_MILESTONE_8_BILLION');case 'ORDINAL_NUMBER_9':return $translate.instant('MILESTONES_MILESTONE_9_BILLION');case 'ORDINAL_NUMBER_10':return $translate.instant('MILESTONES_MILESTONE_10_BILLION');case 'ORDINAL_NUMBER_11':return $translate.instant('MILESTONES_MILESTONE_11_BILLION');default:return $translate.instant(title);}};$scope.$on('languageChange',function(){$scope.milestoneCounter=$translate.instant($scope.atomicNumber);if($scope.milestonesData){for(var i=0;i<$scope.milestonesData.length;i+=1){$scope.milestonesData[i].title=getMilestoneTitle($scope.milestonesData[i].titleType);}}});var _getDateWithOffset=function(date,offset){var updatedDate=moment(date,'YYYY-MM-DD');updatedDate.add(offset,'years');return updatedDate;};var _loadLifeExpectancyRemaining=function(country,onSuccess){$scope.$root.loading+=1;PopulationIOService.loadLifeExpectancyRemaining({sex:ProfileService.gender,country:country,date:$filter('date')(new Date(),'yyyy-MM-dd'),age:ProfileService.getAgeString()},function(remainingLife){var today=new Date();var date=today.setDate(today.getDate()+(remainingLife*365));var countryTitle=country==='World'?$translate.instant('LOCAL_WORLD'):country;var countryPreposition=country==='World'?'auf der':'in'
$scope.milestonesData.push({date:$filter('date')(date,'yyyy-MM-dd'),year:$filter('date')(date,'yyyy'),titleType:(country==='World'?'lifeExpWorld':'lifeExpCountry'),title:$translate.instant('MILESTONES_MILESTONE_LIFE_EXPECTANCY',{in:countryPreposition})+countryTitle});if(onSuccess){onSuccess(remainingLife);}
$scope.$root.loading-=1;},function(){$scope.$root.loading-=1;});};var _loadWpRankRanked=function(rank,atomicNumber){$scope.atomicNumber=atomicNumber;var _isDateGreaterThenToday=function(date){return new Date(date)>=new Date();};var _updateTitleAlive=function(date,atomicNumber){$scope.milestoneDate=date;$scope.milestoneCounter=$translate.instant(atomicNumber);};$scope.$root.loading+=1;var dayOfDeath=new Date(ProfileService.dod);var formatted=ProfileService.getFormattedBirthday();PopulationIOService.loadWpRankRanked({dob:formatted,sex:'unisex',country:'World',rank:rank},function(date){$scope.$root.loading-=1;var loadedDate=new Date(date);if(dayOfDeath<loadedDate){return;}
if(_isDateGreaterThenToday(date)){if(loadedDate<$scope.nextYear||!$scope.nextYear){_updateTitleAlive(date,atomicNumber);$scope.nextYear=loadedDate;}}
$scope.milestonesData.push({date:date,rank:true,titleType:atomicNumber,year:$filter('date')(date,'yyyy'),title:getMilestoneTitle(atomicNumber)});},function(){$scope.$root.loading-=1;});};var _getInitialMilestonesData=function(){var milestoneNow=$translate.instant('MILESTONES_MILESTONE_NOW');var milestoneBorn=$translate.instant('MILESTONES_MILESTONE_BORN');var milestone18=$translate.instant('MILESTONES_MILESTONE_18');var birthday18=_getDateWithOffset(ProfileService.getFormattedBirthday(),18);var now=moment();return[{date:now.format('YYYY-MM-DD'),year:now.year(),title:milestoneNow,titleType:'MILESTONES_MILESTONE_NOW',selected:true,now:true},{date:ProfileService.getFormattedBirthday(),year:ProfileService.birthday.year,title:milestoneBorn,titleType:'MILESTONES_MILESTONE_BORN',born:true},{date:birthday18.format('YYYY-MM-DD'),year:birthday18.year(),title:milestone18,titleType:'MILESTONES_MILESTONE_18'}];};$scope.highlightMilestone=function(item){if($scope.milestonesData){_($scope.milestonesData).each(function(milestone){milestone.selected=false;});}
item.selected=true;$scope.selectedYear=item.year;var selectedExactDate=item.date.split('-');var yearsOnSelectedMilestone=parseInt(selectedExactDate[0],10)-parseInt(ProfileService.birthday.year,10);var birthdayMonth=parseInt(ProfileService.birthday.month,10);var selectedMonth=parseInt(selectedExactDate[1],10);if(birthdayMonth>selectedMonth){yearsOnSelectedMilestone-=1;}else if(birthdayMonth===selectedMonth&&parseInt(ProfileService.birthday.day,10)>parseInt(selectedExactDate[2],10)){yearsOnSelectedMilestone-=1;}
$scope.age=yearsOnSelectedMilestone;PopulationIOService.loadPopulation({year:$scope.selectedYear,country:ProfileService.country},function(data){$scope.localRankData=data;});PopulationIOService.loadPopulation({year:$scope.selectedYear,country:'World'},function(data){$scope.globalRankData=data;});};if(ProfileService.rankGlobal>-1){$scope.rankGlobal=ProfileService.rankGlobal;}
if(ProfileService.rankLocal>-1){$scope.rankLocal=ProfileService.rankLocal;}
$scope.dateOrder=function(item){return(new Date(item.date)).getTime();};$scope.$root.$on('selectedYearChanged',function($event,item){$scope.highlightMilestone(item);});$scope.$on('rankGlobalChanged',function(e,rankGlobal){$scope.rankGlobal=rankGlobal;});$scope.$on('rankLocalChanged',function(e,rankLocal){$scope.rankLocal=rankLocal;});$scope.$on('profileUpdated',function(){$scope.age=ProfileService.getAge();$scope.year=$filter('date')(new Date(),'yyyy');$scope.country=ProfileService.country;$scope.milestonesData=_getInitialMilestonesData();$scope.nextYear=null;_loadLifeExpectancyRemaining(ProfileService.country,function(remainingLife){var today=new Date();var date=today.setDate(today.getDate()+(remainingLife*365));ProfileService.dod=date;_loadWpRankRanked(10000000000,'ORDINAL_NUMBER_10');_loadWpRankRanked(9000000000,'ORDINAL_NUMBER_9');_loadWpRankRanked(8000000000,'ORDINAL_NUMBER_8');_loadWpRankRanked(7000000000,'ORDINAL_NUMBER_7');_loadWpRankRanked(6000000000,'ORDINAL_NUMBER_6');_loadWpRankRanked(5000000000,'ORDINAL_NUMBER_5');_loadWpRankRanked(4000000000,'ORDINAL_NUMBER_4');_loadWpRankRanked(3000000000,'ORDINAL_NUMBER_3');_loadWpRankRanked(2000000000,'ORDINAL_NUMBER_2');_loadWpRankRanked(1000000000,'ORDINAL_NUMBER_1');$scope.titleDie=$sce.trustAsHtml(['You are expected to die on <span>',$filter('ordinal')($filter('date')(date,'d'))+' ',$filter('date')(date,'MMM, yyyy')+'</span>'].join(''));});_loadLifeExpectancyRemaining('World');});}]);angular.module('populationioApp').controller('SummaryCtrl',['$scope','$interval','$filter','$translate','PopulationIOService','ProfileService',function($scope,$interval,$filter,$translate,PopulationIOService,ProfileService){'use strict';var calculateRanks=function(){if($scope.rankLocal===undefined||$scope.rankGlobal===undefined||$scope.worldPopulation===undefined||$scope.countryPopulation===undefined){return;}
$scope.worldYoungerPercentageSimple=Math.min(100,$scope.rankGlobal/($scope.worldPopulation/100));$scope.countryYoungerPercentageSimple=Math.min(100,$scope.rankLocal/($scope.countryPopulation/100));$scope.scaledRankOlderLocal=$scope.countryPopulation-$scope.rankLocal;$scope.scaledRankOlderGlobal=$scope.worldPopulation-$scope.rankGlobal;};$scope.region='World';$scope.profile=ProfileService;$scope.age=new Date().getFullYear()-ProfileService.birthday.year;if(ProfileService.rankGlobal>-1){$scope.rankGlobal=ProfileService.rankGlobal;calculateRanks();}
if(ProfileService.rankLocal>-1){$scope.rankLocal=ProfileService.rankLocal;calculateRanks();}
if(ProfileService.rankGlobalTomorrow>-1){$scope.rankGlobalTomorrow=ProfileService.rankGlobalTomorrow;if($scope.rankGlobal){$scope.deltaRankGlobal=Math.ceil(($scope.rankGlobalTomorrow-$scope.rankGlobal)/(24*60*60));}}
if(ProfileService.rankLocalTomorrow>-1){$scope.rankLocalTomorrow=ProfileService.rankLocalTomorrow;}
calculateRanks();$scope.$watch('worldPopulation',calculateRanks);$scope.calcWorldOlderNumber=function(){if(!$scope.rankGlobal||!$scope.worldPopulation){return 0;}
return $filter('number')(Math.max(0,$scope.worldPopulation-$scope.rankGlobal),0);};$scope.calcWorldOlderPercentage=function(){var value=$filter('number')(Math.max(0,100-$scope.rankGlobal/($scope.worldPopulation/100)),0);return $translate.instant('SUMMARY_PEOPLE_OLDER')+value+'%)';};$scope.calcCountryOlderNumber=function(){return $filter('number')(Math.max(0,$scope.countryPopulation-$scope.rankLocal),0);};$scope.calcCountryOlderPercentage=function(){var value=$filter('number')(Math.max(0,100-$scope.rankLocal/($scope.countryPopulation/100)),0);return $translate.instant('SUMMARY_PEOPLE_OLDER')+value+'%)';};$scope.calcCountryYoungerPercentage=function(){var value=$filter('number')(Math.min(100,$scope.rankLocal/($scope.countryPopulation/100)),0);return $translate.instant('SUMMARY_PEOPLE_YOUNGER')+value+'%)';};$scope.calcWorldYoungerPercentage=function(){var value=$filter('number')(Math.min(100,$scope.rankGlobal/($scope.worldPopulation/100)),0);return $translate.instant('SUMMARY_PEOPLE_YOUNGER')+value+'%)';};$scope.selectWorld=function(){$scope.region='World';ga('send','event','SummaryChartType','World');};$scope.selectCountry=function(){$scope.region=$scope.profile.country;ga('send','event','SummaryChartType','Country');};$scope.$on('rankLocalChanged',function(event,rank){$scope.rankLocal=rank;});$scope.$on('rankGlobalChanged',function(event,rank){$scope.rankGlobal=rank;$scope.deltaRankGlobal=Math.ceil(($scope.rankGlobalTomorrow-$scope.rankGlobal)/(24*60*60));});$scope.$on('rankDateLocalChanged',function(event,rank){$scope.rankLocalTomorrow=rank;});$scope.$on('rankDateGlobalChanged',function(event,rank){$scope.rankGlobalTomorrow=rank;$scope.deltaRankGlobal=Math.ceil(($scope.rankGlobalTomorrow-$scope.rankGlobal)/(24*60*60));});$scope.$on('countryPopulationDataChanged',function(event,data){$scope.countryPopulationData=data;var population=0;for(var i in data){if(!data.hasOwnProperty(i)){continue;}
population+=data[i].total;}
$scope.countryPopulation=population;calculateRanks();});$scope.$on('worldPopulationDataChanged',function(event,data){$scope.worldPopulationData=data;});$interval(function(){if($scope.deltaRankGlobal){$scope.rankGlobal+=$scope.deltaRankGlobal;$scope.$root.$broadcast('rankGlobalChanged',$scope.rankGlobal);}},1000);}]);angular.module('populationioApp').service('BrowserService',function(){'use strict';return{isSupported:function(){return bowser.webkit||bowser.gecko||(bowser.msie&&bowser.version>10);}};});angular.module('populationioApp').service('Countries',function(){'use strict';return[{"POPIO_NAME":"Afghanistan","POINT_X":"66.008447","CONTINENT":"Asia","POINT_Y":"33.836267","POPIO_NAME_ES":"Afganist\u0087n","GMI_CNTRY":"AFG"},{"POPIO_NAME":"Albania","POINT_X":"20.053989","CONTINENT":"Europe","POINT_Y":"41.142582","POPIO_NAME_ES":"Albania","GMI_CNTRY":"ALB"},{"POPIO_NAME":"Algeria","POINT_X":"2.617789","CONTINENT":"Africa","POINT_Y":"28.158463","POPIO_NAME_ES":"Algeria","GMI_CNTRY":"DZA"},{"POPIO_NAME":"Angola","POINT_X":"17.536458","CONTINENT":"Africa","POINT_Y":"-12.29118","POPIO_NAME_ES":"Angola","GMI_CNTRY":"AGO"},{"POPIO_NAME":"Antigua and Barbuda","POINT_X":"-61.790997","CONTINENT":"North America","POINT_Y":"17.284294","POPIO_NAME_ES":"Antigua y Barbuda","GMI_CNTRY":"ATG"},{"POPIO_NAME":"Arab Rep of Egypt","POINT_X":"29.861284","CONTINENT":"Africa","POINT_Y":"26.492376","POPIO_NAME_ES":"Egipto","GMI_CNTRY":"EGY"},{"POPIO_NAME":"Argentina","POINT_X":"-65.178218","CONTINENT":"South America","POINT_Y":"-35.382696","POPIO_NAME_ES":"Argentina","GMI_CNTRY":"ARG"},{"POPIO_NAME":"Armenia","POINT_X":"44.932301","CONTINENT":"Asia","POINT_Y":"40.288134","POPIO_NAME_ES":"Armenia","GMI_CNTRY":"ARM"},{"POPIO_NAME":"Aruba","POINT_X":"-69.9756401428","CONTINENT":"North America","POINT_Y":"12.515625723","POPIO_NAME_ES":"Aruba","GMI_CNTRY":"ABW"},{"POPIO_NAME":"Australia","POINT_X":"134.492572","CONTINENT":"Oceania","POINT_Y":"-25.732365","POPIO_NAME_ES":"Australia","GMI_CNTRY":"AUS"},{"POPIO_NAME":"Austria","POINT_X":"14.130673","CONTINENT":"Europe","POINT_Y":"47.585657","POPIO_NAME_ES":"Austria","GMI_CNTRY":"AUT"},{"POPIO_NAME":"Azerbaijan","POINT_X":"47.542394","CONTINENT":"Asia","POINT_Y":"40.289044","POPIO_NAME_ES":"Azerbaiy\u0087n","GMI_CNTRY":"AZE"},{"POPIO_NAME":"Bahrain","POINT_X":"50.544356","CONTINENT":"Asia","POINT_Y":"26.048945","POPIO_NAME_ES":"Bahrain","GMI_CNTRY":"BHR"},{"POPIO_NAME":"Bangladesh","POINT_X":"90.24339","CONTINENT":"Asia","POINT_Y":"23.842846","POPIO_NAME_ES":"Bangladesh","GMI_CNTRY":"BGD"},{"POPIO_NAME":"Barbados","POINT_X":"-59.560479","CONTINENT":"North America","POINT_Y":"13.180864","POPIO_NAME_ES":"Barbados","GMI_CNTRY":"BRB"},{"POPIO_NAME":"Belarus","POINT_X":"28.033566","CONTINENT":"Europe","POINT_Y":"53.53188","POPIO_NAME_ES":"Bielorrusia","GMI_CNTRY":"BLR"},{"POPIO_NAME":"Belgium","POINT_X":"4.640121","CONTINENT":"Europe","POINT_Y":"50.637406","POPIO_NAME_ES":"B\u008elgica","GMI_CNTRY":"BEL"},{"POPIO_NAME":"Belize","POINT_X":"-88.704835","CONTINENT":"North America","POINT_Y":"17.200815","POPIO_NAME_ES":"Belice","GMI_CNTRY":"BLZ"},{"POPIO_NAME":"Benin","POINT_X":"2.328738","CONTINENT":"Africa","POINT_Y":"9.641208","POPIO_NAME_ES":"Ben\u0092n","GMI_CNTRY":"BEN"},{"POPIO_NAME":"Bhutan","POINT_X":"90.403948","CONTINENT":"Asia","POINT_Y":"27.410593","POPIO_NAME_ES":"But\u0087n","GMI_CNTRY":"BTN"},{"POPIO_NAME":"Bolivia","POINT_X":"-64.684754","CONTINENT":"South America","POINT_Y":"-16.706877","POPIO_NAME_ES":"Bolivia","GMI_CNTRY":"BOL"},{"POPIO_NAME":"Bosnia and Herzegovina","POINT_X":"17.773405","CONTINENT":"Europe","POINT_Y":"44.171739","POPIO_NAME_ES":"Bosnia-Herzegovina","GMI_CNTRY":"BIH"},{"POPIO_NAME":"Botswana","POINT_X":"23.798987","CONTINENT":"Africa","POINT_Y":"-22.185772","POPIO_NAME_ES":"Botswana","GMI_CNTRY":"BWA"},{"POPIO_NAME":"Brazil","POINT_X":"-53.093972","CONTINENT":"South America","POINT_Y":"-10.782781","POPIO_NAME_ES":"Brasil","GMI_CNTRY":"BRA"},{"POPIO_NAME":"Brunei Darussalam","POINT_X":"114.727354","CONTINENT":"Asia","POINT_Y":"4.516338","POPIO_NAME_ES":"Brunei Darussalam","GMI_CNTRY":"BRN"},{"POPIO_NAME":"Bulgaria","POINT_X":"25.217739","CONTINENT":"Europe","POINT_Y":"42.76854","POPIO_NAME_ES":"Bulgaria","GMI_CNTRY":"BGR"},{"POPIO_NAME":"Burkina Faso","POINT_X":"-1.755591","CONTINENT":"Africa","POINT_Y":"12.26956","POPIO_NAME_ES":"Burkina Faso","GMI_CNTRY":"BFA"},{"POPIO_NAME":"Burundi","POINT_X":"29.875083","CONTINENT":"Africa","POINT_Y":"-3.357425","POPIO_NAME_ES":"Burundi","GMI_CNTRY":"BDI"},{"POPIO_NAME":"Cabo Verde","POINT_X":"-23.966613","CONTINENT":"Africa","POINT_Y":"15.935902","POPIO_NAME_ES":"Cabo Verde","GMI_CNTRY":"CPV"},{"POPIO_NAME":"Cambodia","POINT_X":"104.90282","CONTINENT":"Asia","POINT_Y":"12.715572","POPIO_NAME_ES":"Camboya","GMI_CNTRY":"KHM"},{"POPIO_NAME":"Cameroon","POINT_X":"12.737083","CONTINENT":"Africa","POINT_Y":"5.693128","POPIO_NAME_ES":"Camer\u009cn","GMI_CNTRY":"CMR"},{"POPIO_NAME":"Canada","POINT_X":"-98.316063","CONTINENT":"North America","POINT_Y":"61.373126","POPIO_NAME_ES":"Canad\u0087","GMI_CNTRY":"CAN"},{"POPIO_NAME":"Central African Republic","POINT_X":"20.464809","CONTINENT":"Africa","POINT_Y":"6.566321","POPIO_NAME_ES":"Rep\u009cblica Centroafricana","GMI_CNTRY":"CAF"},{"POPIO_NAME":"Chad","POINT_X":"18.646251","CONTINENT":"Africa","POINT_Y":"15.333078","POPIO_NAME_ES":"Chad","GMI_CNTRY":"TCD"},{"POPIO_NAME":"Channel Islands","POINT_X":"NA","CONTINENT":"Europe","POINT_Y":"NA","POPIO_NAME_ES":"Channel Islands","GMI_CNTRY":"CHI"},{"POPIO_NAME":"Chile","POINT_X":"-71.355119","CONTINENT":"South America","POINT_Y":"-37.696072","POPIO_NAME_ES":"Chile","GMI_CNTRY":"CHL"},{"POPIO_NAME":"China","POINT_X":"103.82491","CONTINENT":"Asia","POINT_Y":"36.561277","POPIO_NAME_ES":"China","GMI_CNTRY":"CHN"},{"POPIO_NAME":"Colombia","POINT_X":"-73.080187","CONTINENT":"South America","POINT_Y":"3.910956","POPIO_NAME_ES":"Colombia","GMI_CNTRY":"COL"},{"POPIO_NAME":"Comoros","POINT_X":"43.680788","CONTINENT":"Africa","POINT_Y":"-11.884401","POPIO_NAME_ES":"Comores","GMI_CNTRY":"COM"},{"POPIO_NAME":"Congo","POINT_X":"15.2242939996","CONTINENT":"Africa","POINT_Y":"-0.84023182658","POPIO_NAME_ES":"Congo","GMI_CNTRY":"COG"},{"POPIO_NAME":"Costa Rica","POINT_X":"-84.193238","CONTINENT":"North America","POINT_Y":"9.973605","POPIO_NAME_ES":"Costa Rica","GMI_CNTRY":"CRI"},{"POPIO_NAME":"Cote-d-Ivoire","POINT_X":"-5.569011","CONTINENT":"Africa","POINT_Y":"7.627839","POPIO_NAME_ES":"Costa de Marfil","GMI_CNTRY":"CIV"},{"POPIO_NAME":"Croatia","POINT_X":"16.398662","CONTINENT":"Europe","POINT_Y":"45.06776","POPIO_NAME_ES":"Croacia","GMI_CNTRY":"HRV"},{"POPIO_NAME":"Cuba","POINT_X":"-79.033303","CONTINENT":"North America","POINT_Y":"21.624692","POPIO_NAME_ES":"Cuba","GMI_CNTRY":"CUB"},{"POPIO_NAME":"Curacao","POINT_X":"NA","CONTINENT":"North America","POINT_Y":"NA","POPIO_NAME_ES":"Curacao","GMI_CNTRY":"CUW"},{"POPIO_NAME":"Cyprus","POINT_X":"32.990228","CONTINENT":"Europe","POINT_Y":"34.914998","POPIO_NAME_ES":"Chipre","GMI_CNTRY":"CYP"},{"POPIO_NAME":"Czech Republic","POINT_X":"15.314103","CONTINENT":"Europe","POINT_Y":"49.732448","POPIO_NAME_ES":"Rep\u009cblica Checa","GMI_CNTRY":"CZE"},{"POPIO_NAME":"Dem Peoples Rep of Korea","POINT_X":"127.18767","CONTINENT":"Asia","POINT_Y":"40.170376","POPIO_NAME_ES":"Corea del Norte","GMI_CNTRY":"PRK"},{"POPIO_NAME":"Dem Rep of Congo","POINT_X":"23.6550057054","CONTINENT":"Africa","POINT_Y":"-2.87623474498","POPIO_NAME_ES":"Rep Dem del Congo","GMI_CNTRY":"ZAR"},{"POPIO_NAME":"Denmark","POINT_X":"10.05067","CONTINENT":"Europe","POINT_Y":"55.964717","POPIO_NAME_ES":"Dinamarca","GMI_CNTRY":"DNK"},{"POPIO_NAME":"Djibouti","POINT_X":"42.56667","CONTINENT":"Africa","POINT_Y":"11.750209","POPIO_NAME_ES":"Djibouti","GMI_CNTRY":"DJI"},{"POPIO_NAME":"Dominican Republic","POINT_X":"-70.496272","CONTINENT":"North America","POINT_Y":"18.896204","POPIO_NAME_ES":"Rep\u009cblica Dominicana","GMI_CNTRY":"DOM"},{"POPIO_NAME":"Ecuador","POINT_X":"-78.77323","CONTINENT":"South America","POINT_Y":"-1.424747","POPIO_NAME_ES":"Ecuador","GMI_CNTRY":"ECU"},{"POPIO_NAME":"El Salvador","POINT_X":"-88.869261","CONTINENT":"North America","POINT_Y":"13.736704","POPIO_NAME_ES":"El Salvador","GMI_CNTRY":"SLV"},{"POPIO_NAME":"Equatorial Guinea","POINT_X":"10.333171","CONTINENT":"Africa","POINT_Y":"1.706945","POPIO_NAME_ES":"Guinea Ecuatorial","GMI_CNTRY":"GNQ"},{"POPIO_NAME":"Eritrea","POINT_X":"38.853178","CONTINENT":"Africa","POINT_Y":"15.357538","POPIO_NAME_ES":"Eritrea","GMI_CNTRY":"ERI"},{"POPIO_NAME":"Estonia","POINT_X":"25.535957","CONTINENT":"Europe","POINT_Y":"58.670837","POPIO_NAME_ES":"Estonia","GMI_CNTRY":"EST"},{"POPIO_NAME":"Ethiopia","POINT_X":"39.600551","CONTINENT":"Africa","POINT_Y":"8.622952","POPIO_NAME_ES":"Etiop\u0092a","GMI_CNTRY":"ETH"},{"POPIO_NAME":"Federated States of Micronesia","POINT_X":"155.247759","CONTINENT":"Oceania","POINT_Y":"7.115377","POPIO_NAME_ES":"Micronesia","GMI_CNTRY":"FSM"},{"POPIO_NAME":"Fiji","POINT_X":"163.698141","CONTINENT":"Oceania","POINT_Y":"-17.446659","POPIO_NAME_ES":"Fiji","GMI_CNTRY":"FJI"},{"POPIO_NAME":"Finland","POINT_X":"20.037148","CONTINENT":"Europe","POINT_Y":"60.207334","POPIO_NAME_ES":"Finlandia","GMI_CNTRY":"FIN"},{"POPIO_NAME":"France","POINT_X":"68.991182","CONTINENT":"Europe","POINT_Y":"-49.062703","POPIO_NAME_ES":"Francia","GMI_CNTRY":"FRA"},{"POPIO_NAME":"French Guiana","POINT_X":"-53.2412236314","CONTINENT":"South America","POINT_Y":"3.92468841889","POPIO_NAME_ES":"Guayana Francesa","GMI_CNTRY":"GUF"},{"POPIO_NAME":"French Polynesia","POINT_X":"-149.417679134","CONTINENT":"Oceania","POINT_Y":"-17.6664919203","POPIO_NAME_ES":"Polinesia Francesa","GMI_CNTRY":"PYF"},{"POPIO_NAME":"FYR Macedonia","POINT_X":"21.6974763152","CONTINENT":"Europe","POINT_Y":"41.5996829206","POPIO_NAME_ES":"Macedonia","GMI_CNTRY":"MKD"},{"POPIO_NAME":"Gabon","POINT_X":"11.792239","CONTINENT":"Africa","POINT_Y":"-0.587011","POPIO_NAME_ES":"Gab\u0097n","GMI_CNTRY":"GAB"},{"POPIO_NAME":"Georgia","POINT_X":"43.507651","CONTINENT":"Asia","POINT_Y":"42.168816","POPIO_NAME_ES":"Georgia","GMI_CNTRY":"GEO"},{"POPIO_NAME":"Germany","POINT_X":"10.381548","CONTINENT":"Europe","POINT_Y":"51.106213","POPIO_NAME_ES":"Alemania","GMI_CNTRY":"DEU"},{"POPIO_NAME":"Ghana","POINT_X":"-1.216466","CONTINENT":"Africa","POINT_Y":"7.953797","POPIO_NAME_ES":"Ghana","GMI_CNTRY":"GHA"},{"POPIO_NAME":"Greece","POINT_X":"22.97514","CONTINENT":"Europe","POINT_Y":"39.05122","POPIO_NAME_ES":"Grecia","GMI_CNTRY":"GRC"},{"POPIO_NAME":"Grenada","POINT_X":"-61.655942","CONTINENT":"North America","POINT_Y":"12.1129266563","POPIO_NAME_ES":"Grenada","GMI_CNTRY":"GRD"},{"POPIO_NAME":"Guadeloupe","POINT_X":"-61.648470341","CONTINENT":"North America","POINT_Y":"16.1414757987","POPIO_NAME_ES":"Guadalupe","GMI_CNTRY":"GLP"},{"POPIO_NAME":"Guam","POINT_X":"144.713942955","CONTINENT":"Oceania","POINT_Y":"13.3558122599","POPIO_NAME_ES":"Guam","GMI_CNTRY":"GUM"},{"POPIO_NAME":"Guatemala","POINT_X":"-90.365058","CONTINENT":"North America","POINT_Y":"15.693396","POPIO_NAME_ES":"Guatemala","GMI_CNTRY":"GTM"},{"POPIO_NAME":"Guinea","POINT_X":"-10.942917","CONTINENT":"Africa","POINT_Y":"10.434669","POPIO_NAME_ES":"Guinea","GMI_CNTRY":"GIN"},{"POPIO_NAME":"Guinea-Bissau","POINT_X":"-14.412361314","CONTINENT":"Africa","POINT_Y":"12.1241940674","POPIO_NAME_ES":"Guinea-Bissau","GMI_CNTRY":"GNB"},{"POPIO_NAME":"Guyana","POINT_X":"-58.979905","CONTINENT":"South America","POINT_Y":"4.795142","POPIO_NAME_ES":"Guyana","GMI_CNTRY":"GUY"},{"POPIO_NAME":"Haiti","POINT_X":"-72.690703","CONTINENT":"North America","POINT_Y":"18.93814","POPIO_NAME_ES":"Hait\u0092","GMI_CNTRY":"HTI"},{"POPIO_NAME":"Honduras","POINT_X":"-86.618416","CONTINENT":"North America","POINT_Y":"14.824166","POPIO_NAME_ES":"Honduras","GMI_CNTRY":"HND"},{"POPIO_NAME":"Hong Kong SAR-China","POINT_X":"NA","CONTINENT":"Asia","POINT_Y":"NA","POPIO_NAME_ES":"Hong Kong SAR-China","GMI_CNTRY":"HKG"},{"POPIO_NAME":"Hungary","POINT_X":"19.396759","CONTINENT":"Europe","POINT_Y":"47.163244","POPIO_NAME_ES":"Hungr\u0092a","GMI_CNTRY":"HUN"},{"POPIO_NAME":"Iceland","POINT_X":"-18.595807","CONTINENT":"Europe","POINT_Y":"64.998012","POPIO_NAME_ES":"Islandia","GMI_CNTRY":"ISL"},{"POPIO_NAME":"India","POINT_X":"79.612214","CONTINENT":"Asia","POINT_Y":"22.887366","POPIO_NAME_ES":"India","GMI_CNTRY":"IND"},{"POPIO_NAME":"Indonesia","POINT_X":"117.272105","CONTINENT":"Asia","POINT_Y":"-2.220831","POPIO_NAME_ES":"Indonesia","GMI_CNTRY":"IDN"},{"POPIO_NAME":"Iraq","POINT_X":"43.744986","CONTINENT":"Asia","POINT_Y":"33.039797","POPIO_NAME_ES":"Iraq","GMI_CNTRY":"IRQ"},{"POPIO_NAME":"Ireland","POINT_X":"-8.144426","CONTINENT":"Europe","POINT_Y":"53.177874","POPIO_NAME_ES":"Irelanda","GMI_CNTRY":"IRL"},{"POPIO_NAME":"Islamic Republic of Iran","POINT_X":"54.276286","CONTINENT":"Asia","POINT_Y":"32.572027","POPIO_NAME_ES":"Ir\u0087n","GMI_CNTRY":"IRN"},{"POPIO_NAME":"Israel","POINT_X":"34.9961","CONTINENT":"Asia","POINT_Y":"31.443548","POPIO_NAME_ES":"Israel","GMI_CNTRY":"ISR"},{"POPIO_NAME":"Italy","POINT_X":"12.072137","CONTINENT":"Europe","POINT_Y":"42.786249","POPIO_NAME_ES":"Italia","GMI_CNTRY":"ITA"},{"POPIO_NAME":"Jamaica","POINT_X":"-77.318535","CONTINENT":"North America","POINT_Y":"18.154594","POPIO_NAME_ES":"Jamaica","GMI_CNTRY":"JAM"},{"POPIO_NAME":"Japan","POINT_X":"137.992535","CONTINENT":"Asia","POINT_Y":"37.555901","POPIO_NAME_ES":"Jap\u0097n","GMI_CNTRY":"JPN"},{"POPIO_NAME":"Jordan","POINT_X":"36.770946","CONTINENT":"Asia","POINT_Y":"31.245598","POPIO_NAME_ES":"Jordania","GMI_CNTRY":"JOR"},{"POPIO_NAME":"Kazakhstan","POINT_X":"63.384062","CONTINENT":"Asia","POINT_Y":"45.978305","POPIO_NAME_ES":"Kazajst\u0087n","GMI_CNTRY":"KAZ"},{"POPIO_NAME":"Kenya","POINT_X":"37.796226","CONTINENT":"Africa","POINT_Y":"0.598081","POPIO_NAME_ES":"Kenia","GMI_CNTRY":"KEN"},{"POPIO_NAME":"Kiribati","POINT_X":"-55.32007","CONTINENT":"Oceania","POINT_Y":"0.79981","POPIO_NAME_ES":"Kiribati","GMI_CNTRY":"KIR"},{"POPIO_NAME":"Kuwait","POINT_X":"47.59058","CONTINENT":"Asia","POINT_Y":"29.338788","POPIO_NAME_ES":"Kuwait","GMI_CNTRY":"KWT"},{"POPIO_NAME":"Kyrgyz Republic","POINT_X":"74.541669","CONTINENT":"Asia","POINT_Y":"41.461919","POPIO_NAME_ES":"Kyrgyz Republic","GMI_CNTRY":"KGZ"},{"POPIO_NAME":"Lao PDR","POINT_X":"103.737873","CONTINENT":"Asia","POINT_Y":"18.502298","POPIO_NAME_ES":"Laos","GMI_CNTRY":"LAO"},{"POPIO_NAME":"Latvia","POINT_X":"24.909128","CONTINENT":"Europe","POINT_Y":"56.851761","POPIO_NAME_ES":"Latvia","GMI_CNTRY":"LVA"},{"POPIO_NAME":"Lebanon","POINT_X":"35.880272","CONTINENT":"Asia","POINT_Y":"33.920398","POPIO_NAME_ES":"L\u0092bano","GMI_CNTRY":"LBN"},{"POPIO_NAME":"Lesotho","POINT_X":"28.228623","CONTINENT":"Africa","POINT_Y":"-29.57973","POPIO_NAME_ES":"Lesotho","GMI_CNTRY":"LSO"},{"POPIO_NAME":"Liberia","POINT_X":"-9.319781","CONTINENT":"Africa","POINT_Y":"6.452318","POPIO_NAME_ES":"Liberia","GMI_CNTRY":"LBR"},{"POPIO_NAME":"Libya","POINT_X":"18.009583","CONTINENT":"Africa","POINT_Y":"27.030206","POPIO_NAME_ES":"Libia","GMI_CNTRY":"LBY"},{"POPIO_NAME":"Lithuania","POINT_X":"23.888369","CONTINENT":"Europe","POINT_Y":"55.327008","POPIO_NAME_ES":"Lituania","GMI_CNTRY":"LTU"},{"POPIO_NAME":"Luxembourg","POINT_X":"6.071764","CONTINENT":"Europe","POINT_Y":"49.766824","POPIO_NAME_ES":"Luxamburgo","GMI_CNTRY":"LUX"},{"POPIO_NAME":"Macao SAR China","POINT_X":"NA","CONTINENT":"Asia","POINT_Y":"NA","POPIO_NAME_ES":"Macao SAR China","GMI_CNTRY":"MAC"},{"POPIO_NAME":"Madagascar","POINT_X":"46.706458","CONTINENT":"Africa","POINT_Y":"-19.373254","POPIO_NAME_ES":"Madagascar","GMI_CNTRY":"MDG"},{"POPIO_NAME":"Malawi","POINT_X":"34.289908","CONTINENT":"Africa","POINT_Y":"-13.217226","POPIO_NAME_ES":"Malawi","GMI_CNTRY":"MWI"},{"POPIO_NAME":"Malaysia","POINT_X":"109.697702","CONTINENT":"Asia","POINT_Y":"3.792397","POPIO_NAME_ES":"Malasia","GMI_CNTRY":"MYS"},{"POPIO_NAME":"Maldives","POINT_X":"73.331084","CONTINENT":"Asia","POINT_Y":"3.67978","POPIO_NAME_ES":"Maldivas","GMI_CNTRY":"MDV"},{"POPIO_NAME":"Mali","POINT_X":"-3.539079","CONTINENT":"Africa","POINT_Y":"17.344163","POPIO_NAME_ES":"Mal\u0092","GMI_CNTRY":"MLI"},{"POPIO_NAME":"Malta","POINT_X":"14.404245","CONTINENT":"Europe","POINT_Y":"35.920801","POPIO_NAME_ES":"Malta","GMI_CNTRY":"MLT"},{"POPIO_NAME":"Martinique","POINT_X":"-61.0212878211","CONTINENT":"North America","POINT_Y":"14.6525473278","POPIO_NAME_ES":"Martinica","GMI_CNTRY":"MTQ"},{"POPIO_NAME":"Mauritania","POINT_X":"-10.342917","CONTINENT":"Africa","POINT_Y":"20.256307","POPIO_NAME_ES":"Mauritania","GMI_CNTRY":"MRT"},{"POPIO_NAME":"Mauritius","POINT_X":"57.854617","CONTINENT":"Africa","POINT_Y":"-20.221512","POPIO_NAME_ES":"Mauricio","GMI_CNTRY":"MUS"},{"POPIO_NAME":"Mayotte","POINT_X":"45.1351607431","CONTINENT":"Africa","POINT_Y":"-12.8197953643","POPIO_NAME_ES":"Mayotte","GMI_CNTRY":"MYT"},{"POPIO_NAME":"Mexico","POINT_X":"-102.52704","CONTINENT":"North America","POINT_Y":"23.947546","POPIO_NAME_ES":"M\u008exico","GMI_CNTRY":"MEX"},{"POPIO_NAME":"Moldova","POINT_X":"28.461397","CONTINENT":"Europe","POINT_Y":"47.195101","POPIO_NAME_ES":"Moldavia","GMI_CNTRY":"MDA"},{"POPIO_NAME":"Mongolia","POINT_X":"103.056287","CONTINENT":"Asia","POINT_Y":"46.825806","POPIO_NAME_ES":"Mongolia","GMI_CNTRY":"MNG"},{"POPIO_NAME":"Montenegro","POINT_X":"19.238501","CONTINENT":"Europe","POINT_Y":"42.785856","POPIO_NAME_ES":"Montenegro","GMI_CNTRY":"MNE"},{"POPIO_NAME":"Morocco","POINT_X":"-8.455533","CONTINENT":"Africa","POINT_Y":"29.834245","POPIO_NAME_ES":"Marruecos","GMI_CNTRY":"MAR"},{"POPIO_NAME":"Mozambique","POINT_X":"35.537526","CONTINENT":"Africa","POINT_Y":"-17.270376","POPIO_NAME_ES":"Mozambique","GMI_CNTRY":"MOZ"},{"POPIO_NAME":"Myanmar","POINT_X":"96.489186","CONTINENT":"Asia","POINT_Y":"21.169415","POPIO_NAME_ES":"Myanmar","GMI_CNTRY":"MMR"},{"POPIO_NAME":"Namibia","POINT_X":"17.210796","CONTINENT":"Africa","POINT_Y":"-22.128669","POPIO_NAME_ES":"Namibia","GMI_CNTRY":"NAM"},{"POPIO_NAME":"Nepal","POINT_X":"83.916253","CONTINENT":"Asia","POINT_Y":"28.247922","POPIO_NAME_ES":"Nepal","GMI_CNTRY":"NPL"},{"POPIO_NAME":"New Caledonia","POINT_X":"165.505395242","CONTINENT":"Oceania","POINT_Y":"-21.4052049142","POPIO_NAME_ES":"Nueva Caledonia","GMI_CNTRY":"NCL"},{"POPIO_NAME":"New Zealand","POINT_X":"-158.781437","CONTINENT":"Oceania","POINT_Y":"-19.818704","POPIO_NAME_ES":"Nueva Zelanda","GMI_CNTRY":"NZL"},{"POPIO_NAME":"Nicaragua","POINT_X":"-85.032836","CONTINENT":"North America","POINT_Y":"12.845628","POPIO_NAME_ES":"Nicaragua","GMI_CNTRY":"NIC"},{"POPIO_NAME":"Niger","POINT_X":"9.386034","CONTINENT":"Africa","POINT_Y":"17.418464","POPIO_NAME_ES":"Niger","GMI_CNTRY":"NER"},{"POPIO_NAME":"Nigeria","POINT_X":"8.091504","CONTINENT":"Africa","POINT_Y":"9.596968","POPIO_NAME_ES":"Nigeria","GMI_CNTRY":"NGA"},{"POPIO_NAME":"Norway","POINT_X":"15.41245","CONTINENT":"Europe","POINT_Y":"68.7964","POPIO_NAME_ES":"Noruega","GMI_CNTRY":"NOR"},{"POPIO_NAME":"Oman","POINT_X":"56.092799","CONTINENT":"Asia","POINT_Y":"20.600908","POPIO_NAME_ES":"Om\u0087n","GMI_CNTRY":"OMN"},{"POPIO_NAME":"Pakistan","POINT_X":"69.341852","CONTINENT":"Asia","POINT_Y":"29.94883","POPIO_NAME_ES":"Pakist\u0087n","GMI_CNTRY":"PAK"},{"POPIO_NAME":"Panama","POINT_X":"-80.123917","CONTINENT":"North America","POINT_Y":"8.51045","POPIO_NAME_ES":"Panam\u0087","GMI_CNTRY":"PAN"},{"POPIO_NAME":"Papua New Guinea","POINT_X":"145.22793","CONTINENT":"Asia","POINT_Y":"-6.470358","POPIO_NAME_ES":"Pap\u009ca Nueva Guinea","GMI_CNTRY":"PNG"},{"POPIO_NAME":"Paraguay","POINT_X":"-58.398423","CONTINENT":"South America","POINT_Y":"-23.227519","POPIO_NAME_ES":"Paraguay","GMI_CNTRY":"PRY"},{"POPIO_NAME":"Peru","POINT_X":"-74.381307","CONTINENT":"South America","POINT_Y":"-9.15354","POPIO_NAME_ES":"Per\u009c","GMI_CNTRY":"PER"},{"POPIO_NAME":"Philippines","POINT_X":"122.874714","CONTINENT":"Asia","POINT_Y":"11.763383","POPIO_NAME_ES":"Filipinas","GMI_CNTRY":"PHL"},{"POPIO_NAME":"Poland","POINT_X":"19.394451","CONTINENT":"Europe","POINT_Y":"52.124672","POPIO_NAME_ES":"Polonia","GMI_CNTRY":"POL"},{"POPIO_NAME":"Portugal","POINT_X":"-8.59209","CONTINENT":"Europe","POINT_Y":"39.58568","POPIO_NAME_ES":"Portugal","GMI_CNTRY":"PRT"},{"POPIO_NAME":"Puerto Rico","POINT_X":"-66.480993445","CONTINENT":"North America","POINT_Y":"18.2231072003","POPIO_NAME_ES":"Puerto Rico","GMI_CNTRY":"PRI"},{"POPIO_NAME":"Qatar","POINT_X":"51.187565","CONTINENT":"Asia","POINT_Y":"25.312777","POPIO_NAME_ES":"Qatar","GMI_CNTRY":"QAT"},{"POPIO_NAME":"RB-de-Venezuela","POINT_X":"-66.176722","CONTINENT":"South America","POINT_Y":"7.125003","POPIO_NAME_ES":"Venezuela","GMI_CNTRY":"VEN"},{"POPIO_NAME":"Rep of Korea","POINT_X":"127.832194","CONTINENT":"Asia","POINT_Y":"36.350473","POPIO_NAME_ES":"Corea del Sur","GMI_CNTRY":"KOR"},{"POPIO_NAME":"Rep of Yemen","POINT_X":"47.590931","CONTINENT":"Asia","POINT_Y":"15.905155","POPIO_NAME_ES":"Yemen","GMI_CNTRY":"YEM"},{"POPIO_NAME":"Reunion","POINT_X":"55.5381806497","CONTINENT":"Africa","POINT_Y":"-21.1216615325","POPIO_NAME_ES":"Reuni\u0097n","GMI_CNTRY":"REU"},{"POPIO_NAME":"Romania","POINT_X":"24.973099","CONTINENT":"Europe","POINT_Y":"45.853413","POPIO_NAME_ES":"Ruman\u0092a","GMI_CNTRY":"ROM"},{"POPIO_NAME":"Russian Federation","POINT_X":"96.688981","CONTINENT":"Asia","POINT_Y":"61.983471","POPIO_NAME_ES":"Rusia","GMI_CNTRY":"RUS"},{"POPIO_NAME":"Rwanda","POINT_X":"29.919061","CONTINENT":"Africa","POINT_Y":"-1.99275","POPIO_NAME_ES":"Ruanda","GMI_CNTRY":"RWA"},{"POPIO_NAME":"Samoa","POINT_X":"-172.160278","CONTINENT":"Oceania","POINT_Y":"-13.754676","POPIO_NAME_ES":"Samoa","GMI_CNTRY":"WSM"},{"POPIO_NAME":"Sao Tome and Principe","POINT_X":"6.726958","CONTINENT":"Africa","POINT_Y":"0.444039","POPIO_NAME_ES":"Sao Tome y Principe","GMI_CNTRY":"STP"},{"POPIO_NAME":"Saudi Arabia","POINT_X":"44.537759","CONTINENT":"Asia","POINT_Y":"24.122444","POPIO_NAME_ES":"Arabia Saudita","GMI_CNTRY":"SAU"},{"POPIO_NAME":"Senegal","POINT_X":"-14.47103","CONTINENT":"Africa","POINT_Y":"14.367794","POPIO_NAME_ES":"Senegal","GMI_CNTRY":"SEN"},{"POPIO_NAME":"Serbia","POINT_X":"20.8054574559","CONTINENT":"Europe","POINT_Y":"44.0320458078","POPIO_NAME_ES":"Serbia","GMI_CNTRY":"SRB"},{"POPIO_NAME":"Seychelles","POINT_X":"51.882275","CONTINENT":"Africa","POINT_Y":"-6.590675","POPIO_NAME_ES":"Seychelles","GMI_CNTRY":"SYC"},{"POPIO_NAME":"Sierra Leone","POINT_X":"-11.79483","CONTINENT":"Africa","POINT_Y":"8.563161","POPIO_NAME_ES":"Sierra Leone","GMI_CNTRY":"SLE"},{"POPIO_NAME":"Singapore","POINT_X":"103.813797","CONTINENT":"Asia","POINT_Y":"1.358791","POPIO_NAME_ES":"Singapur","GMI_CNTRY":"SGP"},{"POPIO_NAME":"Slovak Republic","POINT_X":"19.480383","CONTINENT":"Europe","POINT_Y":"48.704935","POPIO_NAME_ES":"Eslovaquia","GMI_CNTRY":"SVK"},{"POPIO_NAME":"Slovenia","POINT_X":"14.808139","CONTINENT":"Europe","POINT_Y":"46.116136","POPIO_NAME_ES":"Eslovenia","GMI_CNTRY":"SVN"},{"POPIO_NAME":"Solomon Islands","POINT_X":"159.616703","CONTINENT":"Oceania","POINT_Y":"-8.901954","POPIO_NAME_ES":"Islas Salom\u0097n","GMI_CNTRY":"SLB"},{"POPIO_NAME":"Somalia","POINT_X":"45.705311","CONTINENT":"Africa","POINT_Y":"4.747511","POPIO_NAME_ES":"Somalia","GMI_CNTRY":"SOM"},{"POPIO_NAME":"South Africa","POINT_X":"25.087733","CONTINENT":"Africa","POINT_Y":"-29.001052","POPIO_NAME_ES":"Sud\u0087frica","GMI_CNTRY":"ZAF"},{"POPIO_NAME":"South Sudan","POINT_X":"30.251066","CONTINENT":"Africa","POINT_Y":"7.305706","POPIO_NAME_ES":"South Sudan","GMI_CNTRY":"SSD"},{"POPIO_NAME":"Spain","POINT_X":"-3.656802","CONTINENT":"Europe","POINT_Y":"40.236901","POPIO_NAME_ES":"Espa\u0096a","GMI_CNTRY":"ESP"},{"POPIO_NAME":"Sri Lanka","POINT_X":"80.70355","CONTINENT":"Asia","POINT_Y":"7.615738","POPIO_NAME_ES":"Sri Lanka","GMI_CNTRY":"LKA"},{"POPIO_NAME":"St-Lucia","POINT_X":"-60.969577","CONTINENT":"North America","POINT_Y":"13.902485","POPIO_NAME_ES":"St-Lucia","GMI_CNTRY":"LCA"},{"POPIO_NAME":"St-Vincent and the Grenadines","POINT_X":"-61.202642","CONTINENT":"North America","POINT_Y":"13.216083","POPIO_NAME_ES":"St-Vincent and the Grenadines","GMI_CNTRY":"VCT"},{"POPIO_NAME":"Sudan","POINT_X":"29.939383","CONTINENT":"Africa","POINT_Y":"15.986757","POPIO_NAME_ES":"Sud\u0087n","GMI_CNTRY":"SDN"},{"POPIO_NAME":"Suriname","POINT_X":"-55.912136","CONTINENT":"South America","POINT_Y":"4.128481","POPIO_NAME_ES":"Surinam","GMI_CNTRY":"SUR"},{"POPIO_NAME":"eSwatini","POINT_X":"31.480024","CONTINENT":"Africa","POINT_Y":"-26.561914","POPIO_NAME_ES":"eSwatini","GMI_CNTRY":"SWZ"},{"POPIO_NAME":"Sweden","POINT_X":"16.752894","CONTINENT":"Europe","POINT_Y":"62.789174","POPIO_NAME_ES":"Suecia","GMI_CNTRY":"SWE"},{"POPIO_NAME":"Switzerland","POINT_X":"8.215383","CONTINENT":"Europe","POINT_Y":"46.799023","POPIO_NAME_ES":"Suiza","GMI_CNTRY":"CHE"},{"POPIO_NAME":"Syrian Arab Rep","POINT_X":"38.504649","CONTINENT":"Asia","POINT_Y":"35.022993","POPIO_NAME_ES":"Siria","GMI_CNTRY":"SYR"},{"POPIO_NAME":"Tajikistan","POINT_X":"71.015822","CONTINENT":"Asia","POINT_Y":"38.52989","POPIO_NAME_ES":"Tadjikist\u0087n","GMI_CNTRY":"TJK"},{"POPIO_NAME":"Tanzania","POINT_X":"34.8081818312","CONTINENT":"Africa","POINT_Y":"-6.27107287242","POPIO_NAME_ES":"Tanzania","GMI_CNTRY":"TZA"},{"POPIO_NAME":"Thailand","POINT_X":"101.003318","CONTINENT":"Asia","POINT_Y":"15.114082","POPIO_NAME_ES":"Tailandia","GMI_CNTRY":"THA"},{"POPIO_NAME":"The Bahamas","POINT_X":"-78.0406006091","CONTINENT":"North America","POINT_Y":"24.7014500118","POPIO_NAME_ES":"Bahamas","GMI_CNTRY":"BHS"},{"POPIO_NAME":"The Gambia","POINT_X":"-15.397103","CONTINENT":"Africa","POINT_Y":"13.44978","POPIO_NAME_ES":" Gambia","GMI_CNTRY":"GMB"},{"POPIO_NAME":"The Netherlands","POINT_X":"-69.973447","CONTINENT":"Europe","POINT_Y":"12.516778","POPIO_NAME_ES":"Holanda","GMI_CNTRY":"NLD"},{"POPIO_NAME":"Timor-Leste","POINT_X":"NA","CONTINENT":"Asia","POINT_Y":"NA","POPIO_NAME_ES":"Timor-Leste","GMI_CNTRY":"TMP"},{"POPIO_NAME":"Togo","POINT_X":"0.962284","CONTINENT":"Africa","POINT_Y":"8.526721","POPIO_NAME_ES":"Togo","GMI_CNTRY":"TGO"},{"POPIO_NAME":"Tonga","POINT_X":"-174.840713","CONTINENT":"Oceania","POINT_Y":"-19.968806","POPIO_NAME_ES":"Tonga","GMI_CNTRY":"TON"},{"POPIO_NAME":"Trinidad and Tobago","POINT_X":"-61.257718","CONTINENT":"North America","POINT_Y":"10.46866","POPIO_NAME_ES":"Trinidad y Tobago","GMI_CNTRY":"TTO"},{"POPIO_NAME":"Tunisia","POINT_X":"9.551856","CONTINENT":"Africa","POINT_Y":"34.115909","POPIO_NAME_ES":"T\u009cnez","GMI_CNTRY":"TUN"},{"POPIO_NAME":"Turkey","POINT_X":"35.167313","CONTINENT":"Asia","POINT_Y":"39.060958","POPIO_NAME_ES":"Turqu\u0092a","GMI_CNTRY":"TUR"},{"POPIO_NAME":"Turkmenistan","POINT_X":"59.376143","CONTINENT":"Asia","POINT_Y":"39.115934","POPIO_NAME_ES":"Turkmenistan","GMI_CNTRY":"TKM"},{"POPIO_NAME":"Uganda","POINT_X":"32.36704","CONTINENT":"Africa","POINT_Y":"1.275691","POPIO_NAME_ES":"Uganda","GMI_CNTRY":"UGA"},{"POPIO_NAME":"Ukraine","POINT_X":"31.385855","CONTINENT":"Europe","POINT_Y":"48.99725","POPIO_NAME_ES":"Ucrania","GMI_CNTRY":"UKR"},{"POPIO_NAME":"United Arab Emirates","POINT_X":"53.982495292","CONTINENT":"Asia","POINT_Y":"23.4335314986","POPIO_NAME_ES":"Emiratos \u00e7rabes Unidos","GMI_CNTRY":"ARE"},{"POPIO_NAME":"United Kingdom","POINT_X":"-0.24654563597","CONTINENT":"Europe","POINT_Y":"52.2497215527","POPIO_NAME_ES":"Reino Unido","GMI_CNTRY":"GBR"},{"POPIO_NAME":"United States","POINT_X":"-99.1288693544","CONTINENT":"North America","POINT_Y":"39.5316721041","POPIO_NAME_ES":"Estados  Unidos","GMI_CNTRY":"USA"},{"POPIO_NAME":"Uruguay","POINT_X":"-56.01756","CONTINENT":"South America","POINT_Y":"-32.800173","POPIO_NAME_ES":"Uruguay","GMI_CNTRY":"URY"},{"POPIO_NAME":"US Virgin Islands","POINT_X":"-64.7625851905","CONTINENT":"North America","POINT_Y":"17.7355380388","POPIO_NAME_ES":"Islas V\u0092rgenes","GMI_CNTRY":"VIR"},{"POPIO_NAME":"Uzbekistan","POINT_X":"63.139909","CONTINENT":"Asia","POINT_Y":"41.756036","POPIO_NAME_ES":"Uzbekist\u0087n","GMI_CNTRY":"UZB"},{"POPIO_NAME":"Vanuatu","POINT_X":"167.701058","CONTINENT":"Oceania","POINT_Y":"-16.201437","POPIO_NAME_ES":"Vanuatu","GMI_CNTRY":"VUT"},{"POPIO_NAME":"Vietnam","POINT_X":"106.301296","CONTINENT":"Asia","POINT_Y":"16.641606","POPIO_NAME_ES":"Vietnam","GMI_CNTRY":"VNM"},{"POPIO_NAME":"West Bank and Gaza","POINT_X":"34.351906","CONTINENT":"Africa","POINT_Y":"31.389951","POPIO_NAME_ES":"West Bank and Gaza","GMI_CNTRY":"WBG"},{"POPIO_NAME":"Western Sahara","POINT_X":"-12.214726","CONTINENT":"Africa","POINT_Y":"24.232712","POPIO_NAME_ES":"Sahara Occidental","GMI_CNTRY":"ESH"},{"POPIO_NAME":"Zambia","POINT_X":"27.774212","CONTINENT":"Africa","POINT_Y":"-13.46011","POPIO_NAME_ES":"Zambia","GMI_CNTRY":"ZMB"},{"POPIO_NAME":"Zimbabwe","POINT_X":"29.851885","CONTINENT":"Africa","POINT_Y":"-19.002537","POPIO_NAME_ES":"Zimbabwe","GMI_CNTRY":"ZWE"}];});angular.module('populationioApp').service('HelloWords',function(){'use strict';return[{'abbreviation':'AD','language':'Andorra','greeting':'Hola','probability':0.000},{'abbreviation':'AE','language':'United Arab Emirates','greeting':'Marhaba','probability':0.091},{'abbreviation':'AF','language':'Afghanistan','greeting':'Senga yai','probability':0.739},{'abbreviation':'AG','language':'Antigua and Barbuda','greeting':'Hello','probability':0.001},{'abbreviation':'AI','language':'Anguilla','greeting':'Hello','probability':0.000},{'abbreviation':'AL','language':'Albania','greeting':'Tungjatjeta','probability':0.030},{'abbreviation':'AM','language':'Armenia','greeting':'Barev','probability':0.028},{'abbreviation':'AN','language':'Netherlands Antilles','greeting':'Kon ta bai','probability':0.000},{'abbreviation':'AO','language':'Angola','greeting':'Ol','probability':0.705},{'abbreviation':'AP','language':'Asia/Pacific Region','greeting':'Hello','probability':0.000},{'abbreviation':'AQ','language':'Antarctica','greeting':'Hello','probability':0.000},{'abbreviation':'AR','language':'Argentina','greeting':'Hola','probability':0.497},{'abbreviation':'AS','language':'American Samoa','greeting':'Hello','probability':0.000},{'abbreviation':'AT','language':'Austria','greeting':'Hallo','probability':0.059},{'abbreviation':'AU','language':'Australia','greeting':'Hello','probability':0.225},{'abbreviation':'AW','language':'Aruba','greeting':'Kon ta bai','probability':0.001},{'abbreviation':'AX','language':'Aland Islands','greeting':'Hello','probability':0.000},{'abbreviation':'AZ','language':'Azerbaijan','greeting':'Salam','probability':0.117},{'abbreviation':'BA','language':'Bosnia and Herzegovina','greeting':'Zdravo','probability':0.025},{'abbreviation':'BB','language':'Barbados','greeting':'Hello','probability':0.003},{'abbreviation':'BD','language':'Bangladesh','greeting':'Namaskar','probability':2.229},{'abbreviation':'BE','language':'Belgium','greeting':'Hallo','probability':0.093},{'abbreviation':'BF','language':'Burkina Faso','greeting':'Bonjour','probability':0.513},{'abbreviation':'BG','language':'Bulgaria','greeting':'Zdravei','probability':0.049},{'abbreviation':'BH','language':'Bahrain','greeting':'Marhaba','probability':0.014},{'abbreviation':'BI','language':'Burundi','greeting':'Bonjour','probability':0.341},{'abbreviation':'BJ','language':'Benin','greeting':'Bonjour','probability':0.278},{'abbreviation':'BM','language':'Bermuda','greeting':'Hello','probability':0.000},{'abbreviation':'BN','language':'Brunei Darussalam','greeting':'Selamat','probability':0.005},{'abbreviation':'BO','language':'Bolivia','greeting':'Hola','probability':0.200},{'abbreviation':'BR','language':'Brazil','greeting':'Ol','probability':2.127},{'abbreviation':'BS','language':'Bahamas','greeting':'Hello','probability':0.004},{'abbreviation':'BT','language':'Bhutan','greeting':'Kuzu zangpo','probability':0.010},{'abbreviation':'BV','language':'Bouvet Island','greeting':'Hello','probability':0.000},{'abbreviation':'BW','language':'Botswana','greeting':'Dumela','probability':0.034},{'abbreviation':'BY','language':'Belarus','greeting':'','probability':0.072},{'abbreviation':'BZ','language':'Belize','greeting':'Hello','probability':0.006},{'abbreviation':'CA','language':'Canada','greeting':'Hello','probability':0.291},{'abbreviation':'GB','language':'Channel Islands','greeting':'Hello','probability':0.001},{'abbreviation':'CD','language':'Congo  The Democratic Republic of the','greeting':'Bonjour','probability':2.146},{'abbreviation':'CF','language':'Central African Republic','greeting':'Bonjour','probability':0.116},{'abbreviation':'CG','language':'Congo','greeting':'Bonjour','probability':0.123},{'abbreviation':'CH','language':'Switzerland','greeting':'Hallo','probability':0.063},{'abbreviation':'CI','language':'Cote d\'Ivoire','greeting':'Bonjour','probability':0.551},{'abbreviation':'CK','language':'Cook Islands','greeting':'Kia orana','probability':0.000},{'abbreviation':'CL','language':'Chile','greeting':'Hola','probability':0.176},{'abbreviation':'CM','language':'Cameroon','greeting':'Hello','probability':0.611},{'abbreviation':'CN','language':'China','greeting':'','probability':13.016},{'abbreviation':'CO','language':'Colombia','greeting':'Hola','probability':0.645},{'abbreviation':'CR','language':'Costa Rica','greeting':'Hola','probability':0.053},{'abbreviation':'CU','language':'Cuba','greeting':'Hola','probability':0.075},{'abbreviation':'CW','language':'Curacao','greeting':'Con ta bai','probability':0.001},{'abbreviation':'CY','language':'Cyprus','greeting':' ','probability':0.010},{'abbreviation':'CV','language':'Cape Verde','greeting':'Ol','probability':0.007},{'abbreviation':'CZ','language':'Czech Republic','greeting':'Dobr den','probability':0.085},{'abbreviation':'DE','language':'Germany','greeting':'Hallo','probability':0.507},{'abbreviation':'DJ','language':'Djibouti','greeting':'Marhaba','probability':0.017},{'abbreviation':'DK','language':'Denmark','greeting':'Hej','probability':0.046},{'abbreviation':'DM','language':'Dominica','greeting':'Hello','probability':0.000},{'abbreviation':'DO','language':'Dominican Republic','greeting':'Hola','probability':0.154},{'abbreviation':'KP','language':'Dem Peoples Rep of Korea','greeting':'','probability':0.259},{'abbreviation':'DZ','language':'Algeria','greeting':'Marhaba','probability':0.678},{'abbreviation':'EC','language':'Ecuador','greeting':'Hola','probability':0.235},{'abbreviation':'EE','language':'Estonia','greeting':'Tervist','probability':0.010},{'abbreviation':'EG','language':'Egypt','greeting':'Marhaba','probability':1.364},{'abbreviation':'ER','language':'Eritrea','greeting':'Marhaba','probability':0.171},{'abbreviation':'ES','language':'Spain','greeting':'Hola','probability':0.340},{'abbreviation':'ET','language':'Ethiopia','greeting':'Teanastlln','probability':2.277},{'abbreviation':'EU','language':'Europe','greeting':'Hello','probability':0.000},{'abbreviation':'FI','language':'Finland','greeting':'Moi','probability':0.044},{'abbreviation':'FJ','language':'Fiji','greeting':'Hello','probability':0.013},{'abbreviation':'FK','language':'Falkland Islands (Malvinas)','greeting':'Hello','probability':0.000},{'abbreviation':'MKD','language':'FYR Macedonia','greeting':'Zdravo','probability':0.016},{'abbreviation':'FM','language':'Micronesia  Federated States of','greeting':'Hello','probability':0.002},{'abbreviation':'FO','language':'Faroe Islands','greeting':'Hallo','probability':0.000},{'abbreviation':'FR','language':'France','greeting':'Bonjour','probability':0.570},{'abbreviation':'GA','language':'Gabon','greeting':'Bonjour','probability':0.039},{'abbreviation':'GB','language':'Great Britain','greeting':'Hello','probability':0.000},{'abbreviation':'GD','language':'Grenada','greeting':'Hello','probability':0.001},{'abbreviation':'GR','language':'Greece','greeting':' ','probability':0.076},{'abbreviation':'GE','language':'Georgia','greeting':'Gamardjobat','probability':0.040},{'abbreviation':'GF','language':'French Guiana','greeting':'Bonjour','probability':0.004},{'abbreviation':'GG','language':'Guernsey','greeting':'Hello','probability':0.000},{'abbreviation':'GH','language':'Ghana','greeting':'Hello','probability':0.580},{'abbreviation':'GI','language':'Gibraltar','greeting':'Hello','probability':0.000},{'abbreviation':'GL','language':'Greenland','greeting':'Aluu','probability':0.000},{'abbreviation':'GM','language':'Gambia','greeting':'Hello','probability':0.060},{'abbreviation':'GN','language':'Guinea','greeting':'Bonjour','probability':0.320},{'abbreviation':'GP','language':'Guadeloupe','greeting':'Hello','probability':0.004},{'abbreviation':'GQ','language':'Equatorial Guinea','greeting':'Hola','probability':0.020},{'abbreviation':'GT','language':'Guatemala','greeting':'Hola','probability':0.353},{'abbreviation':'GU','language':'Guam','greeting':'Hello','probability':0.002},{'abbreviation':'GW','language':'Guinea-Bissau','greeting':'Ol','probability':0.047},{'abbreviation':'GY','language':'Guyana','greeting':'Hello','probability':0.011},{'abbreviation':'HN','language':'Honduras','greeting':'HHola','probability':0.152},{'abbreviation':'HR','language':'Croatia','greeting':'Bok','probability':0.029},{'abbreviation':'HT','language':'Haiti','greeting':'Bonjour','probability':0.190},{'abbreviation':'HU','language':'Hungary','greeting':'J napot','probability':0.070},{'abbreviation':'HK','language':'Hong Kong SAR-China','greeting':'','probability':0.049},{'abbreviation':'IN','language':'India','greeting':'','probability':18.253},{'abbreviation':'ID','language':'Indonesia','greeting':'Selamat','probability':3.311},{'abbreviation':'IE','language':'Ireland','greeting':'Haileo','probability':0.051},{'abbreviation':'IL','language':'Israel','greeting':'Shalom','probability':0.112},{'abbreviation':'IM','language':'Isle of Man','greeting':'Hello','probability':0.000},{'abbreviation':'IO','language':'British Indian Ocean Territory','greeting':'Hello','probability':0.000},{'abbreviation':'IQ','language':'Iraq','greeting':'Marhaba','probability':0.778},{'abbreviation':'IR','language':'Islamic Republic of Iran','greeting':'Salm','probability':1.030},{'abbreviation':'IS','language':'Iceland','greeting':'Gan daginn','probability':0.003},{'abbreviation':'IT','language':'Italy','greeting':'Buon giorno','probability':0.396},{'abbreviation':'JE','language':'Jersey','greeting':'Hello','probability':0.000},{'abbreviation':'JM','language':'Jamaica','greeting':'Hello','probability':0.036},{'abbreviation':'JP','language':'Japan','greeting':'','probability':0.748},{'abbreviation':'JO','language':'Jordan','greeting':'Marhaba','probability':0.139},{'abbreviation':'KE','language':'Kenya','greeting':'Habari','probability':1.134},{'abbreviation':'KG','language':'Kyrgyz Republic','greeting':'Kandisiz','probability':0.109},{'abbreviation':'KH','language':'Cambodia','greeting':'Sua s\'dei','probability':0.280},{'abbreviation':'KI','language':'Kiribati','greeting':'Mauri','probability':0.002},{'abbreviation':'KM','language':'Comoros','greeting':'Bariza djioni','probability':0.019},{'abbreviation':'KN','language':'Saint Kitts and Nevis','greeting':'Hello','probability':0.000},{'abbreviation':'KW','language':'Kuwait','greeting':'Marhaba','probability':0.051},{'abbreviation':'KY','language':'Cayman Islands','greeting':'Hello','probability':0.000},{'abbreviation':'KZ','language':'Kazakhstan','greeting':'Salam','probability':0.237},{'abbreviation':'LA','language':'Lao People\'s Democratic Republic','greeting':'Sabaidee','probability':0.130},{'abbreviation':'LB','language':'Lebanon','greeting':'Marhaba','probability':0.048},{'abbreviation':'LC','language':'Saint Lucia','greeting':'Hello','probability':0.002},{'abbreviation':'LI','language':'Liechtenstein','greeting':'Hallo','probability':0.000},{'abbreviation':'LK','language':'Sri Lanka','greeting':'A`yubowan','probability':0.267},{'abbreviation':'LR','language':'Liberia','greeting':'Hello','probability':0.112},{'abbreviation':'LS','language':'Lesotho','greeting':'Hello','probability':0.041},{'abbreviation':'LT','language':'Lithuania','greeting':'Laba diena','probability':0.025},{'abbreviation':'LU','language':'Luxembourg','greeting':'Moen','probability':0.005},{'abbreviation':'LV','language':'Latvia','greeting':'Sveiki','probability':0.016},{'abbreviation':'LY','language':'Libyan Arab Jamahiriya','greeting':'Marhaba','probability':0.090},{'abbreviation':'MO','language':'Macao SAR China','greeting':'','probability':0.004},{'abbreviation':'MA','language':'Morocco','greeting':'Marhaba','probability':0.537},{'abbreviation':'MC','language':'Monaco','greeting':'Bonjour','probability':0.000},{'abbreviation':'MD','language':'Moldova  Republic of','greeting':'Salut','probability':0.029},{'abbreviation':'ME','language':'Montenegro','greeting':'Zdravo','probability':0.005},{'abbreviation':'MG','language':'Madagascar','greeting':'Manao ahoana','probability':0.596},{'abbreviation':'MH','language':'Marshall Islands','greeting':'Yokwe','probability':0.000},{'abbreviation':'ML','language':'Mali','greeting':'Bonjour','probability':0.546},{'abbreviation':'MM','language':'Myanmar','greeting':'Mingalarba','probability':0.649},{'abbreviation':'MN','language':'Mongolia','greeting':'Sain baina uu','probability':0.046},{'abbreviation':'MP','language':'Northern Mariana Islands','greeting':'Hello','probability':0.000},{'abbreviation':'MQ','language':'Martinique','greeting':'Hello','probability':0.003},{'abbreviation':'MR','language':'Mauritania','greeting':'Marhaba','probability':0.098},{'abbreviation':'MS','language':'Montserrat','greeting':'Hello','probability':0.000},{'abbreviation':'MT','language':'Malta','greeting':'Bongu','probability':0.003},{'abbreviation':'MU','language':'Mauritius','greeting':'Hello','probability':0.010},{'abbreviation':'MV','language':'Maldives','greeting':'Kihineth','probability':0.005},{'abbreviation':'MW','language':'Malawi','greeting':'Muribwanji','probability':0.487},{'abbreviation':'MX','language':'Mexico','greeting':'Hola','probability':1.594},{'abbreviation':'MY','language':'Malaysia','greeting':'Selamat','probability':0.387},{'abbreviation':'MZ','language':'Mozambique','greeting':'Ol','probability':0.740},{'abbreviation':'NA','language':'Namibia','greeting':'Hello','probability':0.044},{'abbreviation':'NC','language':'New Caledonia','greeting':'Bozo','probability':0.003},{'abbreviation':'NE','language':'Niger','greeting':'Bonjour','probability':0.685},{'abbreviation':'NF','language':'Norfolk Island','greeting':'Whataway','probability':0.000},{'abbreviation':'NG','language':'Nigeria','greeting':'Hello','probability':5.344},{'abbreviation':'NI','language':'Nicaragua','greeting':'Hola','probability':0.098},{'abbreviation':'NL','language':'Netherlands','greeting':'Hallo','probability':0.129},{'abbreviation':'NO','language':'Norway','greeting':'Hallo','probability':0.046},{'abbreviation':'NP','language':'Nepal','greeting':'Namaste','probability':0.412},{'abbreviation':'NR','language':'Nauru','greeting':'Hello','probability':0.000},{'abbreviation':'NU','language':'Niue','greeting':'Faka lofa lahi atu','probability':0.000},{'abbreviation':'NZ','language':'New Zealand','greeting':'Hello','probability':0.045},{'abbreviation':'OM','language':'Oman','greeting':'Marhaba','probability':0.054},{'abbreviation':'PA','language':'Panama','greeting':'Hola','probability':0.054},{'abbreviation':'PE','language':'Peru','greeting':'Hola','probability':0.429},{'abbreviation':'PF','language':'French Polynesia','greeting':'Bonjour','probability':0.003},{'abbreviation':'PG','language':'Papua New Guinea','greeting':'Hello','probability':0.154},{'abbreviation':'PH','language':'Philippines','greeting':'Halo','probability':1.755},{'abbreviation':'PK','language':'Pakistan','greeting':'Adaab','probability':3.302},{'abbreviation':'PL','language':'Poland','greeting':'Dzie dobry','probability':0.296},{'abbreviation':'PM','language':'Saint Pierre and Miquelon','greeting':'Hello','probability':0.000},{'abbreviation':'PR','language':'Puerto Rico','greeting':'Hola','probability':0.031},{'abbreviation':'PS','language':'Palestinian Territory','greeting':'Marhaba','probability':0.000},{'abbreviation':'PT','language':'Portugal','greeting':'Ol','probability':0.064},{'abbreviation':'PW','language':'Palau','greeting':'Alii','probability':0.000},{'abbreviation':'PY','language':'Paraguay','greeting':'Hola','probability':0.118},{'abbreviation':'QA','language':'Qatar','greeting':'Marhaba','probability':0.017},{'abbreviation':'RE','language':'Reunion','greeting':'Hello','probability':0.010},{'abbreviation':'KR','language':'Rep of Korea','greeting':'','probability':0.341},{'abbreviation':'RO','language':'Romania','greeting':'Salut','probability':0.158},{'abbreviation':'RS','language':'Serbia','greeting':'Zdravo','probability':0.065},{'abbreviation':'RU','language':'Russian Federation','greeting':'','probability':1.193},{'abbreviation':'RW','language':'Rwanda','greeting':'Hello','probability':0.303},{'abbreviation':'SA','language':'Saudi Arabia','greeting':'Marhaba','probability':0.396},{'abbreviation':'SB','language':'Solomon Islands','greeting':'Hello','probability':0.012},{'abbreviation':'SC','language':'Seychelles','greeting':'Hello','probability':0.001},{'abbreviation':'SS','language':'South Sudan','greeting':'Hello','probability':0.306},{'abbreviation':'SD','language':'Sudan','greeting':'Marhaba','probability':0.934},{'abbreviation':'SE','language':'Sweden','greeting':'God dag','probability':0.084},{'abbreviation':'SG','language':'Singapore','greeting':'Selamat','probability':0.040},{'abbreviation':'SI','language':'Slovenia','greeting':'ivijo','probability':0.015},{'abbreviation':'SK','language':'Slovak Republic','greeting':'Dobr de','probability':0.042},{'abbreviation':'SL','language':'Sierra Leone','greeting':'Hello','probability':0.161},{'abbreviation':'SM','language':'San Marino','greeting':'Buon giorno','probability':0.000},{'abbreviation':'SN','language':'Senegal','greeting':'Bonjour','probability':0.396},{'abbreviation':'SO','language':'Somalia','greeting':'Maalim wanaqsan','probability':0.344},{'abbreviation':'SR','language':'Suriname','greeting':'Hallo','probability':0.007},{'abbreviation':'ST','language':'Sao Tome and Principe','greeting':'Hello','probability':0.005},{'abbreviation':'SV','language':'El Salvador','greeting':'Hola','probability':0.091},{'abbreviation':'SY','language':'Syrian Arab Republic','greeting':'Marhaba','probability':0.384},{'abbreviation':'SZ','language':'eSwatini','greeting':'Hello','probability':0.027},{'abbreviation':'TC','language':'Turks and Caicos Islands','greeting':'Hello','probability':0.000},{'abbreviation':'TD','language':'Chad','greeting':'Marhaba','probability':0.439},{'abbreviation':'TG','language':'Togo','greeting':'Bonjour','probability':0.182},{'abbreviation':'TH','language':'Thailand','greeting':'Sawatdi','probability':0.474},{'abbreviation':'TJ','language':'Tajikistan','greeting':'Salom','probability':0.199},{'abbreviation':'TL','language':'Timor-Leste','greeting':'Ola','probability':0.030},{'abbreviation':'TK','language':'Tokelau','greeting':'Taloha','probability':0.000},{'abbreviation':'TM','language':'Turkmenistan','greeting':'Salam','probability':0.080},{'abbreviation':'TN','language':'Tunisia','greeting':'Marhaba','probability':0.135},{'abbreviation':'TO','language':'Tonga','greeting':'Malo e lelei','probability':0.002},{'abbreviation':'TR','language':'Turkey','greeting':'Merhaba','probability':0.893},{'abbreviation':'TT','language':'Trinidad and Tobago','greeting':'Hello','probability':0.013},{'abbreviation':'TV','language':'Tuvalu','greeting':'Talofa','probability':0.000},{'abbreviation':'TZ','language':'Tanzania  United Republic of','greeting':'Habari','probability':1.435},{'abbreviation':'UA','language':'Ukraine','greeting':'Pryvit','probability':0.343},{'abbreviation':'UG','language':'Uganda','greeting':'Habari','probability':1.218},{'abbreviation':'UK','language':'United Kingdom','greeting':'Hello','probability':0.554},{'abbreviation':'UM','language':'United States Minor Outlying Islands','greeting':'Hello','probability':0.000},{'abbreviation':'US','language':'United States','greeting':'Hello','probability':3.062},{'abbreviation':'UY','language':'Uruguay','greeting':'Hola','probability':0.035},{'abbreviation':'UZ','language':'Uzbekistan','greeting':'Salom','probability':0.443},{'abbreviation':'VA','language':'Holy See (Vatican City State)','greeting':'Buon giorno','probability':0.000},{'abbreviation':'VC','language':'Saint Vincent and the Grenadines','greeting':'Hello','probability':0.001},{'abbreviation':'VE','language':'Venezuela','greeting':'Hola','probability':0.430},{'abbreviation':'VG','language':'Virgin Islands  British','greeting':'Hello','probability':0.000},{'abbreviation':'VI','language':'Virgin Islands  U.S.','greeting':'Hello','probability':0.001},{'abbreviation':'VN','language':'Vietnam','greeting':'Cho','probability':0.997},{'abbreviation':'VU','language':'Vanuatu','greeting':'Halo','probability':0.005},{'abbreviation':'WF','language':'Wallis and Futuna','greeting':'Malo le kataki','probability':0.000},{'abbreviation':'EH','language':'Western Sahara','greeting':'Hola','probability':0.009},{'abbreviation':'PS','language':'West Bank and Gaza','greeting':'Marhaba','probability':0.098},{'abbreviation':'WS','language':'Samoa','greeting':'Talofa','probability':0.003},{'abbreviation':'YE','language':'Rep of Yemen','greeting':'Marhaba','probability':0.555},{'abbreviation':'YT','language':'Mayotte','greeting':'Hello','probability':0.005},{'abbreviation':'ZA','language':'South Africa','greeting':'Hello','probability':0.780},{'abbreviation':'ZM','language':'Zambia','greeting':'Hello','probability':0.473},{'abbreviation':'ZW','language':'Zimbabwe','greeting':'Hello','probability':0.329}];});angular.module('populationioApp').factory('LanguageService',['$rootScope','$translate','tmhDynamicLocale',function($rootScope,$translate,tmhDynamicLocale){'use strict';var supportedLanguages=['EN','ES','FR','DE','ZH','ID','RU'];var languageEvents={};var getSupportedLanguage=function(language){language=language.toUpperCase();if(supportedLanguages.indexOf(language)>-1){return language;}
return 'EN';};var skipLanguageEvent=function(language){languageEvents[language]=true;languageEvents[language.toUpperCase()]=true;};return{skipLanguageEvent:skipLanguageEvent,change:function(language){if(!languageEvents.hasOwnProperty(language)){ga('send','event','Language','change',language);skipLanguageEvent(language);}
language=getSupportedLanguage(language);$translate.use(language).then(function(){moment.locale(language.toLowerCase());tmhDynamicLocale.set(language.toLowerCase());$rootScope.defaultLanguage=language;$rootScope.$broadcast('languageChange');});},getTitle:function(language){switch(language){case 'EN':return 'English';case 'ES':return 'Espaol';case 'FR':return 'Franais';case 'DE':return 'Deutsch';case 'ZH':return '';case 'ID':return 'Bahasa Indonesia';case 'RU':return '';}
return '';},supportedLanguages:supportedLanguages};}]);angular.module('populationioApp').service('PopulationIOService',['$rootScope','$http',function($rootScope,$http){'use strict';var baseUrl=' https://d6wn6bmjj722w.population.io/1.0';return{getWorldPopulation:function(onSuccess,onError){$http({method:'get',url:baseUrl+'/population/World/today-and-tomorrow/'}).success(function(data){if(data&&onSuccess){onSuccess(data);}}).error(function(){if(onError){onError();}
console.error('getWorldPopulation() error');});},getLocalPopulation:function(country,onSuccess,onError){$http({method:'get',url:baseUrl+'/population/'+(country=="eSwatini"?"Swaziland":country)+'/today-and-tomorrow/'}).success(function(data){if(data&&onSuccess){onSuccess(data);}}).error(function(){if(onError){onError();}
console.error('getCountryPopulation() error');});},loadCountries:function(onSuccess,onError){$http({method:'get',url:baseUrl+'/countries/'}).success(function(data){if(data.countries){onSuccess(data.countries);}}).error(function(){if(onError){onError();}
console.error('loadCountries() error');});},loadMortalityDistribution:function(args,onSuccess,onError){var worldDistribution,countryDistribution,worldChances=[],countryChances=[];$http({method:'get',url:baseUrl+'/mortality-distribution/World/'+args.gender+'/'+args.age+'y/today/'}).success(function(data){if(data.mortality_distribution){worldDistribution=data.mortality_distribution;var worldChancesPure=_.reduce(worldDistribution,function(acc,n){acc.push((acc.length>0?acc[acc.length-1]:0)+n.mortality_percent);return acc;},[]);_.each(worldDistribution,function(item,index){worldChances.push({age:item.age,mortality_percent:worldChancesPure[index]});});$http({method:'get',url:baseUrl+'/mortality-distribution/'+(args.country=="eSwatini"?"Swaziland":args.country)+'/'+args.gender+'/'+args.age+'y/today/'}).success(function(data){if(data.mortality_distribution&&onSuccess){countryDistribution=data.mortality_distribution;var countryChancesPure=_.reduce(countryDistribution,function(acc,n){acc.push((acc.length>0?acc[acc.length-1]:0)+n.mortality_percent);return acc;},[]);_.each(countryDistribution,function(item,index){countryChances.push({age:item.age,mortality_percent:countryChancesPure[index]});});onSuccess({worldDistribution:worldDistribution,countryDistribution:countryDistribution,worldChances:worldChances,countryChances:countryChances});}}).error(function(){if(onError){onError();}
console.error('loadMortalityDistribution() error');});}}).error(function(){if(onError){onError();}
console.error('loadCountries() error');});},loadWpRankToday:function(args,onSuccess,onError){$http({method:'get',url:[baseUrl,'wp-rank',args.dob,args.sex,(args.country=="eSwatini"?"Swaziland":args.country),'today'].join('/')+'/'}).success(function(data){if(data.rank){onSuccess(data.rank);}}).error(function(error){if(onError){onError();}
console.error('loadWpRankToday() error',error);});},loadWpRankOnDate:function(args,onSuccess,onError){$http({method:'get',url:[baseUrl,'wp-rank',args.dob,args.sex,(args.country=="eSwatini"?"Swaziland":args.country),'on',args.date].join('/')+'/'}).success(function(data){if(data.rank){onSuccess(data.rank);}}).error(function(){if(onError){onError();}
console.error('loadWpRankOnDate() error');});},loadWpRankRanked:function(args,onSuccess,onError){$http({method:'get',url:[baseUrl,'wp-rank',args.dob,args.sex,(args.country=="eSwatini"?"Swaziland":args.country),'ranked',args.rank].join('/')+'/'}).success(function(data){if(data.date_on_rank){onSuccess(data.date_on_rank);}}).error(function(error){if(onError){onError();}
console.error('loadWpRankRanked() error: ',args,error);});},loadLifeExpectancyRemaining:function(args,onSuccess,onError){$http({method:'get',url:[baseUrl,'life-expectancy/remaining',args.sex,(args.country=="eSwatini"?"Swaziland":args.country),args.date,args.age].join('/')+'/'}).success(function(data){if(data.remaining_life_expectancy){onSuccess(data.remaining_life_expectancy);}}).error(function(){if(onError){onError();}
console.error('loadLifeExpectancyRemaining() error');});},loadLifeExpectancyTotal:function(args,onSuccess,onError){$http({method:'get',url:[baseUrl,'life-expectancy/total',args.sex,(args.country=="eSwatini"?"Swaziland":args.country),args.dob].join('/')+'/'}).success(function(data){if(data.total_life_expectancy){onSuccess(data.total_life_expectancy);}}).error(function(){if(onError){onError();}
console.error('loadLifeExpectancyTotal() error');});},loadPopulation:function(args,onSuccess,onError){$http({method:'get',url:[baseUrl,'population',args.year,(args.country=="eSwatini"?"Swaziland":args.country)].join('/')+'/'}).success(function(data){if(data){onSuccess(data);}}).error(function(){if(onError){onError();}
console.error('loadPopulation() error');});},loadPopulationByCountryAndAge:function(args,onSuccess,onError){$http({method:'get',url:[baseUrl,'population',args.year,(args.country=="eSwatini"?"Swaziland":args.country),args.age].join('/')+'/'}).success(function(data){if(data){onSuccess(data);}}).error(function(){if(onError){onError();}
console.error('loadPopulation() error');});},loadPopulationByAge:function(args,onSuccess,onError){$http({method:'get',url:[baseUrl,'population',args.year,'aged',args.age].join('/')+'/'}).success(function(data){if(data){onSuccess(data);}}).error(function(){if(onError){onError();}
console.error('loadPopulation() error');});}};}]);angular.module('populationioApp').service('ProfileService',['$rootScope','PopulationIOService',function($rootScope,PopulationIOService){'use strict';return{gender:'female',birthday:{year:null,month:null,day:null,formatted:''},country:'',active:false,rankGlobal:-1,rankGlobalTomorrow:-1,rankLocal:-1,rankLocalTomorrow:-1,getBirthDate:function(){return new Date(this.birthday.year,this.birthday.month-1,this.birthday.day,0,0,0);},getFormattedBirthday:function(){return moment(this.getBirthDate()).format('YYYY-MM-DD');},getAge:function(){var ageDate=new Date(Date.now()-this.getBirthDate().getTime());return Math.abs(ageDate.getUTCFullYear()-1970);},getAgeString:function(){var ageDate=new Date(Date.now()-this.getBirthDate().getTime());var year=Math.abs(ageDate.getUTCFullYear()-1970);var months=ageDate.getMonth();return year+'y'+months+'m';},update:function(){var self=this;this.active=false;$rootScope.loading=0;var formatted=this.getFormattedBirthday();var _getNextDay=function(){var tomorrow=new Date();tomorrow.setDate((new Date()).getDate()+1);return tomorrow;};$rootScope.loading+=1;PopulationIOService.loadWpRankToday({dob:formatted,sex:'unisex',country:this.country},function(rank){self.rankLocal=rank;$rootScope.loading-=1;$rootScope.$broadcast('rankLocalChanged',rank);});$rootScope.loading+=1;PopulationIOService.loadWpRankToday({dob:formatted,sex:'unisex',country:'World'},function(rank){self.rankGlobal=rank;$rootScope.loading-=1;$rootScope.$broadcast('rankGlobalChanged',rank);});var date=moment(_getNextDay()).format('YYYY-MM-DD');$rootScope.loading+=1;PopulationIOService.loadWpRankOnDate({dob:formatted,sex:'unisex',country:this.country,date:date},function(rank){self.rankLocalTomorrow=rank;$rootScope.loading-=1;$rootScope.$broadcast('rankDateLocalChanged',rank,date);});$rootScope.loading+=1;PopulationIOService.loadWpRankOnDate({dob:formatted,sex:'unisex',country:'World',date:date},function(rank){self.rankGlobalTomorrow=rank;$rootScope.loading-=1;$rootScope.$broadcast('rankDateGlobalChanged',rank,date);});$rootScope.loading+=1;PopulationIOService.loadPopulation({year:new Date().getFullYear(),country:this.country},function(data){$rootScope.loading-=1;$rootScope.$broadcast('countryPopulationDataChanged',data);});$rootScope.loading+=1;PopulationIOService.loadPopulation({year:new Date().getFullYear(),country:'World'},function(data){$rootScope.loading-=1;$rootScope.$broadcast('worldPopulationDataChanged',data);});var deregisterWatcher=$rootScope.$watch('loading',function(newValue){if(!newValue){deregisterWatcher();self.active=true;$rootScope.$broadcast('profileUpdated');}});}};}]);angular.module('populationioApp').service('WorldPovertyIOService',['$rootScope','$http',function($rootScope,$http){'use strict';var baseUrl='http://api.povertyclock.staging.population.io/1.0';return{getWorldPoverty:function(args,onSuccess,onError){$http({method:'get',url:baseUrl+'/poverty/world/'+args.date+'/'+args.seconds+'/?format=json'}).success(function(data){if(data&&onSuccess){onSuccess(data);}}).error(function(){if(onError){onError();}
console.error('getWorldPoverty() error');});}};}]);